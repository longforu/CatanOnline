{"version":3,"sources":["lght/util/util.js","lght/lght.js","View/view.js","Model/model.js","Controller/controller.js","App.js","serviceWorker.js","index.js"],"names":["random","high","low","Math","round","mergeDefaultPropertyObject","p","d","o","prop","_","cloneDeep","findDistance2Point","x1","y1","x2","y2","sqrt","pow","findAngle2Point","dx","dy","tan","atan","radToDeg","rad","PI","degToRad","deg","rotatePoint","cx","cy","x","y","calculateRotatePoint","r","angleIndex","indexOf","coeff","cos","sin","findIntersection","s1","s2","x11","y11","x12","y12","x21","y21","x22","y22","minX1","min","maxX1","max","minX2","maxX2","slope1","slope2","coeff1","findClosestPoint","s","angle","abs","findAngle3Point","d1","d2","changeByDotNotation","propertyString","object","value","propertyArray","split","objectLink","forEach","e","i","length","Array","isArray","parseInt","getByDotNotation","lght","inputReference","movementIndex","coeffIndex","defaultAppConfig","initFunctions","animateFunctions","lastFrame","undefined","constantRender","background","defaultObjectProps","shapes","animations","animationCount","static","rotation","positionIndicator","display","opacity","mouseUpEvent","mouseDownEvent","mouseMoveEvent","zIndex","defaultShapeOptions","kind","color","lineWidth","borderColor","borderWidth","border","borderOnly","shadow","defaultRectOptions","w","h","clip","clipImageLink","clipCanvas","defaultArcOptions","arcDegree","defaultTextOptions","textAlign","font","text","defaultImgOptions","spriteLink","drawWidth","drawHeight","loadedFunction","defaultPolyOptions","points","specialPolygon","numberOfSide","radius","defaultLineOptions","apps","gameloop","list","frameTime","loop","time","requestAnimationFrame","app","elem","options","this","canvas","objects","push","turnFunctions","prototype","obj","update","translateMouseCoor","pageX","pageY","clientX","document","body","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","offsetTop","objectCount","property","parent","id","name","objectName","collide","pointInShape","xs","ys","findMax","minX","maxX","minY","maxY","spriteLinkReference","spriteImageReference","funcLists","sprite","link","func","index","image","Image","onload","src","shape","splice","vertex","findVertex","offsetMinX","borderWidthIfBorderIsOn","offsetMaxX","offsetMinY","offsetMaxY","shadowOffsetMinX","blur","shadowOffsetMaxX","shadowOffsetMinY","shadowOffsetMaxY","offsetX","offsetY","sides","findSides","compareSide","intersect","result","maxY1","minY1","maxY2","minY2","side1","side2","hasBorder","width","height","rect","rx","ry","nx","absoluteX","ny","absoluteY","arc","minAngle","maxAngle","minRadAngle","maxRadAngle","referenceX","referenceY","vertex1","vertex2","pureCircle","ray1","ray2","side","closest","roundedRectangle","borderRadius","clipImage","updateVisual","complete","poly","polyPoints","map","radiusCoefficient","line","notIncluded","position","point","rotatedPoints","distance","angleQuadrant","firstDistance","pointOneInFirstQuadrant","pointSecondInSecondQuadrant","pointThreeInThirdQuadrant","pointFourInFourthQuadrant","c","context","save","measureText","restore","textSize","img","imageLoaded","attachQuickMovement","velocity","cooldown","cd","addEventListener","key","setTimeout","mouseInputInit","attachEvent","event","pointInObject","LargeLoop","a","pressedEvent","makeDraggable","funcDone","onDrag","draggable","hoverEvent","funcin","funcout","mouseIn","touch","animate","timeDifference","animateFunctionReference","animation","init","timeUp","newValue","addAnimation","timeout","cancelAnimation","alreadyAnimated","find","findIndex","clearTimeout","arguments","render","clearCanvas","fillBackground","renderShape","visualInit","backgroundColor","getContext","renderPositions","sort","b","drawPreloader","draw","clearRect","fillStyle","fillRect","beginPath","closePath","fill","preloader","maxes","createPreloader","clearPreloader","ox","oy","drawShape","createElement","ceil","translate","drawImg","drawShapeKind","stroke","globalAlpha","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","drawRect","drawArc","drawText","drawPoly","drawLine","drawRoundedRectangle","clipImageLoaded","rotate","drawImage","strokeRect","moveTo","lineTo","quadraticCurveTo","br","er","fillText","addShape","addObject","removeObject","View","configureMonopolyResourceInterface","monopoly","addLayer","resourceReference","total","resolveFunction","initiateMonpolyResourceChoosing","Promise","args","addLayerViaName","hexProperty","inititiateArray","getPositionMatrix","createDiceDeck","createDevDeck","createActionObject","createPlayerDeck","drawAnnouncement","setUpResourceIcon","setUpTurnTimer","configureStartGameMessage","playerCode","turnObject","colorCode","startGameObject","activated","fadeIn","fadeOut","initiateStartGameMessage","turnOffStartGameMessage","previousColor","model","imageReference","halfCard","stealInterface","letterHeadText","numberLeftText","numberLeftElement","numberChosen","numberNeeded","numberLeft","mode","actionFunction","actionFuctionFactory","getNumberLeft","icons","numbers","chosen","addModifier","subtractModifier","modifierFunctionFactory","updateNumbers","leftModifier","rightModifier","addYellowHoverEvent","acceptSymbol","halfh","resolve","initiateSteal","cardNeeded","initiatePlenty","stealTextProp","positions","initiateStealFromOther","usernames","console","log","robberPosition","grid","resourceBoard","playerUsernames","numberBoard","createBoard","BigLoop","positionMatrix","robberX","robberY","robber","addRobber","location","resourceElement","robberElement","l","locations","loc","house","drawPossibleSettlement","kill","turnTimer","turnTimerInterval","turnTimerElement","turnTimerText","startTurnTimer","cancelTurnTimer","timeLeft","setInterval","clearInterval","res","posY","posX","resource","findDistanceFromShapeTo","leaderBoardObject","toX","toY","makeResourceIcon","wheatResourceIcon","rockResourceIcon","brickResourceIcon","sheepResourceIcon","woodResourceIcon","animateDevCard","onTrade","queue","proposer","bankAmountAllowed","cancelTrade","proposeTrade","receiveMode","tradingElement","amountGivenReference","amountDemandReference","proposeTo","createImageLine","ys2","addModifierLine","icon","modifier","addNumberLine","number","propose","numberOfResourceGiven","rate","tradingPriveleges","randomTrade","numberOfResourceDemand","getResourceLeft","numberOfResourceLeft","proposeTradeLetterHead","proposerElement","resourceLeft","usernamesElement","addCheck","username","check","checkElement","bank","changeMode","cancel","cancelSymbolBottom","cancelSymbolTop","rejectFunctionFactory","tradeReceiver","proposeTradeFunction","reduce","t","deiniateReceiveMode","deinitiateSendMode","deiniateBankMode","m","updateTradeReceiver","filter","playerid","proposing","resourceDemanded","resourceGiven","receiveTrade","reject","initiateTrade","announcementQueue","announcmentPerpetual","onAnnouncementPerpetual","onAnnoucementChanged","announcement","annoucementText","fadeOutThenFadeIn","updateAnnouncement","findPositionOfIntersection","structureElement","roads","drawPossibleRoad","topHead","bottomHead","angle1","angle2","roadElement","leaderBoardCanvas","leaderBoardApp","createShape","textColor","us1","is1","sn1","us2","is2","sn2","us3","is3","sn3","us4","is4","sn4","usernameElements","infoElements","specialNoteElements","updateLeaderBoard","resourcePlayers","devCardPlayers","vpPlayers","longestRoadPlayer","largestArmyPlayer","u","turnIndicator","tradeIndicatorObject","hRect","turnOriginal","updateTurn","turn","actionObject","addActionObject","textElement","actionReference","actionDisplayReference","textObjects","actionFunctions","currentActions","updateActionObjects","wheatAmount","rockAmount","sheepAmount","brickAmount","woodAmount","changeResource","num","wheatCard","rockCard","sheepCard","brickCard","woodCard","playerUI","playerDeck","addCard","arr","createDevLayer","layer","devDeck","popUpDevDeckRectangle","delegate","developmentCardReference","cardElements","card","currentCardPosition","oldModel","myDevCards","updateToModel","cards","backgroundPoly","clipImageLinks","imageResourceReference","repeatedlyAddByPositionMatrix","array","row","elements","checkPositionFactory","addNumberTokenToPositionWithNumber","tradeImageReference","tradeResourceReference","boardPosReference","py","px","trade","port","portElement","portMap","hex","hexWidth","fiveRow","fourRowDown","sideLength","threeRowDown","fourRowUp","threeRowUp","leftOrRight","cardHeight","cardWidth","cardProps","numberCircleProps","numberProp","card1","circle","diceProps","borde","dicePlate","diceElement","redDice","yellowDice","diceNumReference","rollDiceAnimation","pip1","pip2","loopleft","loopManage","showDiceNumber","dice1","dice2","renderNumber","dice","pipColor","pips","pip","dots","numberOfDot","startingPosition","cityResolveFunction","currentColorCode","settlements","structures","oldSettlement","structure","cities","changeDistance","oddsOneOut","differentCoefficient","translatedPosition","translateToViewCoordinate","flat","y3","x3","oddY","oddX","hexMap","tileRow","leftMostHex","rightMostHex","vx","vy","findThePositionThatIsRelativeToThisObjectFromAbsolutePosition","oddsHex","pos","buttonMap","numberMap","compareDoubleArray","comparePositions","p1","p2","position1","position2","found","isThereThisPositionInThisArray","Model","allGridLocation","chunk","totalDevCard","totalResource","inBound","firstY","secondY","thirdY","tile","positionTypeCoefficient","oddsY","oddsX","leftOddsBorderTile","rightOddsBorderTile","yOfTileRowBorderTile","differenceInLength","tileRowBorderTile","topHead1","bottomHead1","topHead2","bottomHead2","road","compareRoad","adjacents","findAdjacentPositionsTo","settlement","head","doesThisRoadAlreadyExist","selfRoad","woodTrade","sheepTrade","brickTrade","rockTrade","wheatTrade","selfSettlement","possibles","includes","toLowerCase","city","change","playerindex","selfCity","possibleSettlements","possibleRoads","canBuildCity","canBuildSettlement","canBuildRoad","alreadyChecked","notAlreadyChecked","validPlaceToBuildAStructure","heads","headsFiltered","Controller","token","socket","io","connect","query","emit","sendMessage","message","data","usualFunctionReference","messageReference","waitingFunctionReference","errorFunctionReference","translateToApplicableResources","resources","addMessage","mess","addOnce","awaitResponse","rejected","messageReceived","f","view","on","global","turnSpecificInfo","startRobberDrag","phase","announce","code","changeAnnoucementPerpetual","quickAnnounce","addToAnnoucementQueue","turnOffAnnouncement","configureColorCode","error","gameData","roomCode","loadData","receiveData","createLeaderboardObject","createTradingObject","configureStealInterface","createDevDeckPlayer","devCardDelegate","currentX","currentY","newPlayer","selectSettlementLocationFrom","possibleSettlementsInitial","firstSettlementLocation","buildSettlement","selfBuildSettlement","addResourceInitial","selectRoadLocation","possibleRoadsInitial","firstRoadLocation","buildRoad","selfBuildRoad","roadPosition","settlementPosition","secondSettlementLocation","secondRoadLocation","changeToPhaseOne","changeToPhaseTwo","possibleActions","changeToWaitingPhase","actionFunctionFactory","changePlayerResourceCount","phase2ActionFunctionFactory","handleRobber","changeRobberPostion","robabble","findWhoToStealFrom","robbed","wheat","sheep","rock","brick","wood","minusResource","amount","totalResources","activateCitySelection","buildCity","selfBuildCity","phase2DevCardFunctionFactory","devCardFunctionFactory","previousPhase","Error","useDevelopmentCard","Knight","playedDevelopmentCard","Point","Plenty","addResource","Monopoly","changeResourceMonopoly","Road","firstPosition","secondPosition","alreadyBuying","selfCanBuyDevelopmentCard","boughtDevelopmentCard","buyDevCard","animateDevCardToPlayerDeck","armyChange","roadChange","passiveFunctionFactory","attachPassiveFunctionFactory","moveRobber","winner","myTradingCodes","myTradingPartner","getRidOfCode","amountGiven","amountDemand","players","codes","translateToArray","handleTrade","user","resourceDemand","given","demand","changeToPartner","otherPlayer","giver","getter","give","take","base","axios","create","baseURL","post","url","method","App","canvasRef","useRef","useState","logIn","setLogIn","validationSchema","string","processLogin","current","submitData","cogoToast","createRoom","useEffect","className","ref","style","path","initialValues","onSubmit","handleChange","handleBlur","handleSubmit","type","onChange","onBlur","to","exact","Boolean","window","hostname","match","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.d48b27f7.chunk.js","sourcesContent":["import _ from 'lodash'\n\nconst random = (high,low) => {return Math.round(Math.random()*(high-low+1) + low);}\n\t\nconst mergeDefaultPropertyObject = (p,d,o)=>{\n\tfor(var prop in d){\n\t\tif(typeof p == 'object'){\n\t\t\tif(typeof p[prop] === 'function') o[prop] = p[prop]\n\t\t\telse if(typeof p[prop] != 'undefined') o[prop] = _.cloneDeep(p[prop]);\n\t\t\telse o[prop] = _.cloneDeep(d[prop]);\n\t\t}\n\t\telse{\n\t\t\to[prop] = _.cloneDeep(d[prop]);\n\t\t}\n\t}\n}\n\n//<---------------------GEOMETRIC FUNCTION-------------------->\n\nconst findQuadrant = (angle) => {\n\tif(angle < 90 && angle > 0) return 1;\n\tif(angle > 90 && angle < 180) return 2;\n\tif(angle > 180 && angle < 270) return 3;\n\tif(angle > 270 && angle < 360) return 4;\n}\n\nconst findDistance2Point = (x1,y1,x2,y2)=>Math.sqrt(Math.pow((x1-x2),2) + Math.pow((y1-y2),2))\n\n\nconst findAngle2Point = function(x1,y1,x2,y2){\n\t//CHECK SPECIAL CASES\n\tif(x1===x2&&y1===y2) return 0;\n\tif(x1===x2){\n\t\tif(y1 < y2) return 270;\n\t\tif(y1 > y2) return 90;\n\t} \n\tif(y1===y2){\n\t\tif(x1<x2) return 0;\n\t\tif(x2<x1) return 180;\n\t}\n\n\t//FIND QUADRANT\n\tvar dx = x2-x1; var dy = y2-y1;\n\tvar tan = Math.atan((-dy)/dx);\n\n\tif(x1<x2&&y1>y2) return radToDeg(tan);//QUADRANT 1\n\tif(x1>x2&&y1>y2) return\t180 + radToDeg(tan); //QUADRANT 2\n\tif(x1>x2&&y1<y2) return 180 + radToDeg(tan);//QUADRANT 3\n\tif(x1<x2&&y1<y2) return 360 + radToDeg(tan);//QUADRANT 4\n}\n\nconst radToDeg = (rad) => (rad*180)/Math.PI;\n\nconst degToRad = (deg) => (deg*Math.PI)/180;\n\nconst rotatePoint = (cx,cy,x,y,deg) => (deg===0||deg===360)? [x,y]: calculateRotatePoint(cx,cy,findAngle2Point(cx,cy,x,y)+deg,findDistance2Point(cx,cy,x,y));\n\nconst calculateRotatePoint = function(cx,cy,r,d){\n\tconst rad = degToRad(r);\n\n\t//IF IT'S IN SPECIAL CASE\n\tconst angleIndex = [0,90,180,270,360];\n\tconst coeffIndex = [[1,0],[0,1],[-1,0],[0,-1],[1,0]];\n\tif(angleIndex.indexOf(r) !== -1){\n\t\tconst coeff = coeffIndex[angleIndex.indexOf(r)];\n\t\treturn [cx+coeff[0]*d,cy-coeff[1]*d];\n\t}\n\treturn [cx + Math.cos(rad)*d, cy - Math.sin(rad)*d];\n}\n\n\n//<----------------------SEGMENT INTERSECTION, USED FOR OBJECT COLLISION------------------------------>\nlet findIntersection = function(s1,s2){\n\t//FIND CONSTRAINS FOR USE BEFORE INTERSECTION FUNCTION\n\tlet [x11,y11,x12,y12] = s1\n\tlet [x21,y21,x22,y22] = s2\n\tif(Math.round(x11) === Math.round(x12) || Math.round(x21) === Math.round(x22)){\n\t\t[x11,y11] = rotatePoint(0,0,x11,y11,30);\n\t\t[x12,y12] = rotatePoint(0,0,x12,y12,30);\n\t\t[x21,y21] = rotatePoint(0,0,x21,y21,30);\n\t\t[x22,y22] = rotatePoint(0,0,x22,y22,30);\n\t}\n\n\n\tconst minX1 = Math.min(x11,x12); const maxX1 = Math.max(x11,x12);\n\tconst minX2 = Math.min(x21,x22); const maxX2 = Math.max(x21,x22);\n\n\tconst slope1 =(y11-y12)/(x11-x12); \n\tconst slope2 =(y21-y22)/(x21-x22);\n\tconst coeff1 = -(x11*slope1) + y11;\n\tconst coeff2 = -(x21*slope2) + y21;\n\n\tif(slope1===slope2) return false;\n\tconst x = (coeff2 - coeff1)/(slope1 - slope2);\n\tconst y = slope1*x + coeff1;\n\tif(((x>minX1)&&(x<maxX1))&&((x>minX2)&&(x<maxX2))) return [x,y];\n\treturn false;\n}\n\n\n//<--------------------------OTHER SEGMENT FUNCTION------------------------------>\nconst findAngle3Point = (cx,cy,x1,y1,x2,y2) => Math.abs(findAngle2Point(cx,cy,x2,y2) - findAngle2Point(cx,cy,x1,y1))\n\n//FIND THE 'HEIGHT' OF A POINT TO A SEGMENT\nconst findClosestPoint = function(x,y,s){\n\tconst [x1,y1,x2,y2] = s\n\n\tlet angle = findAngle3Point(x1,y1,x,y,x2,y2);\n\tconst d = findDistance2Point(x,y,x1,y1);\n\n\tconst d1 = Math.abs(d*Math.cos(degToRad(angle)));\n\tconst d2 = Math.sqrt(Math.pow(d,2) - Math.pow(d1,2));\n\n\tif(d1 > findDistance2Point(x1,y1,x2,y2)) return false;\n\n\tangle = degToRad(findAngle2Point(x1,y1,x2,y2));\n\tconst xh = x1 + Math.cos(angle) * d1; \n\tconst yh = y1 - Math.sin(angle) * d1;\n\treturn [xh,yh,d2];\n}\n\nconst changeByDotNotation = (propertyString,object,value) => {\n\tconst propertyArray = propertyString.split(\".\")\n\tlet objectLink = object\n\tpropertyArray.forEach((e,i)=>{\n\t\tif (i === propertyArray.length - 1){\n\t\t\tif(Array.isArray(objectLink)) objectLink[parseInt(e)] = value\n\t\t\telse objectLink[e] = value\n\t\t}\n\t\telse{\n\t\t\tif(Array.isArray(objectLink)) objectLink = objectLink[parseInt(e)]\n\t\t\telse objectLink = objectLink[e]\n\t\t}\n\t})\n}\n\nconst getByDotNotation = (propertyString,object)=>{\n\tconst propertyArray = propertyString.split(\".\")\n\tlet value = object\n\tpropertyArray.forEach(e=>{\n\t\tif(Array.isArray(value)) value = value[parseInt(e)]\n\t\telse value=object[e]\n\t})\n\treturn value\n}\n\nexport {findClosestPoint,findAngle3Point,findAngle2Point,findIntersection,calculateRotatePoint,random,\nmergeDefaultPropertyObject,findQuadrant,findDistance2Point,radToDeg,degToRad,rotatePoint,changeByDotNotation,getByDotNotation}","//LIGHT LIBRARY IS DEVELOPED BY LONG TRAN\n//COPYRIGHT 2020, ALL RIGHTS RESERVED\n\nimport {getByDotNotation, changeByDotNotation , mergeDefaultPropertyObject, findDistance2Point, findIntersection, rotatePoint, degToRad, findAngle2Point ,findClosestPoint, calculateRotatePoint, radToDeg} from './util/util'\n\nlet lght = {};\n\n//Config\nlght.inputReference = {};\nlght.inputReference.movementIndex = \n    ['w','a','s','d','ArrowUp','ArrowLeft','ArrowDown','ArrowRight'];\n\nlght.inputReference.coeffIndex = \n    [[0,-1],[-1,0],[0,1],[1,0],[0,-1],[-1,0],[0,1],[1,0]];\n\nlght.defaultAppConfig = {\n    initFunctions:[\"visualInit\",'mouseInputInit'],\n    animateFunctions:[\"animate\",\"update\",\"render\"],\n    lastFrame:undefined,\n    constantRender:true,\n    background:\"black\",\n}\n\nlght.defaultObjectProps = {\n    shapes:[],\n    animations:[],\n    animationCount:0,\n    initFunctions:[\"createPreloader\"],\n    static:true,\n    x:0,y:0,\n    rotation:0, \n    positionIndicator:false,\n    display:true,opacity:1,\n    mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[],\n    zIndex:0\n}\n\nlght.defaultShapeOptions = {\n    kind:\"rect\",\n    animations:[],\n    animationCount:0,\n    x:0,y:0,rotation:0,\n    color:\"black\",display:true,\n    lineWidth:1, opacity:1,\n    borderColor:'yellow',\n    borderWidth:10,\n    border:false, borderOnly:false,\n    shadow:null,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[]\n}\n\nlght.defaultRectOptions = {\n    w:0,h:0,clip:false,\n    clipImageLink:null,clipCanvas:null\n}\n\nlght.defaultArcOptions = {\n    rad:0, arcDegree:360,\n}\n\nlght.defaultTextOptions = {\n    textAlign:'left',\n    font:'10px Ariel',\n    text:'Hello World'\n}\n\nlght.defaultImgOptions = {\n    spriteLink:null,\n    drawWidth:null,drawHeight:null,\n    loadedFunction:undefined\n}\n\nlght.defaultPolyOptions = {\n    points:[],\n    specialPolygon:false,\n    numberOfSide:0,\n    radius:10,\n    clip:false,\n    clipImageLink:null\n}\n\nlght.defaultLineOptions = {\n    points:[]\n}\n\n//Main\nlght.apps = [];\n\nlght.gameloop = {\n    list:[],\n    frameTime:undefined,\n    lastFrame:undefined\n};\n\nlght.gameloop.loop = (time)=>{\n    requestAnimationFrame(lght.gameloop.loop);\n\n    for(var i = 0;i<lght.gameloop.list.length;i++){\n        lght.gameloop.list[i](lght.apps[i]);\n    }\n    \n    if(time!==undefined){\n        lght.lastFrame = lght.frameTime;\n        lght.frameTime = time;\n    }\n}\n\n\n\nlght.gameloop.loop();\n\nlght.app = function(elem,options) {\n\n    this.options = {};\n    mergeDefaultPropertyObject(options,lght.defaultAppConfig,this.options)        \n    this.canvas = elem;\n    this.options.initFunctions.forEach((e)=>this[e]())\n    \n    this.objects = []\n    lght.gameloop.list.push((this.options.constantRender)?this.turnFunctions:()=>{})\n    lght.apps.push(this);\n}\n\nlght.app.prototype.turnFunctions = (obj)=>{\n    obj.options.animateFunctions.forEach((e)=>obj[e]())\n}\n\nlght.app.prototype.update = function(){\n    this.objects.forEach(e => {\n        if(typeof e.update === 'function') e.update(e)\n    });\n}\n\nlght.app.prototype.translateMouseCoor = function(e){\n\tvar x;\n\tvar y;\n\tif (e.pageX || e.pageY) { \n\t\tx = e.pageX;\n\t\ty = e.pageY;\n\t}\n\telse { \n\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft; \n\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop; \n\t} \n\tx -= this.canvas.offsetLeft;\n\ty -= this.canvas.offsetTop;\n\treturn [x*2,y*2];\n}\n\n//Object\n\n//TOTAL OBJECT COUNT, USED TO PRODUCE ID\nlght.objectCount = 0;\n\nlght.object = class {\n    constructor(property,parent){\n        lght.objectCount++\n        this.id = lght.objectCount;\n        this.parent = parent;\n        this.parent.objects.push(this)\n        mergeDefaultPropertyObject\n        (property,lght.defaultObjectProps,this);    \n        this.initFunctions.forEach((e)=>this[e]())        \n        this.name = (property.objectName)?property.objectName:`Object ${this.id}`\n    }\n\n    collide(obj){\n        for(let s1 of this.shapes){\n            for (let s2 of obj.shapes){\n                if(s1.collide(s2)) return true\n            }\n        }\n\n        return false\n    }\n\n    pointInObject(x,y){\n        for(let s1 of this.shapes){\n           if(s1.pointInShape(x,y)) return true\n        }\n        return false\n    }\n\n    findMax(){\n        let xs = []\n        let ys = []\n        this.shapes.forEach(s=>{\n            let [minX,maxX,minY,maxY] = s.findMax()\n            xs = [...xs,minX,maxX]\n            ys = [...ys,minY,maxY]\n        })\n        return [Math.min(...xs),Math.max(...xs),Math.min(...ys),Math.max(...ys)]\n    }\n\n    findThePositionThatIsRelativeToThisObjectFromAbsolutePosition(x,y){\n        return [x-this.x,y-this.y]\n    }\n}\n\nlght.spriteLinkReference = []\nlght.spriteImageReference = []\nlght.funcLists = []\n\nlght.sprite = (link,func)=> {\n    const index = lght.spriteLinkReference.indexOf(link)\n    if(index !== -1){\n        const image = lght.spriteImageReference[index]\n        lght.funcLists[index].push(func)\n        return image\n    }\n    else{\n        const image = new Image()\n        const id = lght.spriteImageReference.length\n        image.onload = ()=>{\n            lght.funcLists[id].forEach(e=>e())\n        }\n        lght.funcLists[id] = []\n        lght.funcLists[id].push(func)\n        image.src = link\n        lght.spriteLinkReference.push(link)\n        lght.spriteImageReference.push(image)\n        return image\n    }\n}\n\nlght.shape = class {\n    constructor (property,parent) {\n        this.kind = property.kind\n        this.parent = parent;\n        this.parent.shapes.push(this);\n        mergeDefaultPropertyObject\n        (property,lght.defaultShapeOptions,this);\n    }\n\n    kill (){\n        this.parent.shapes.splice(this.parent.shapes.indexOf(this),1);\n    }\n\n    get absoluteX(){\n        return this.x + this.parent.x\n    }\n\n    get absoluteY(){\n        return this.y + this.parent.y\n    }\n\n    get hasBorder(){\n        return this.border||this.borderOnly\n    }\n\n    get width(){\n        return ((this.hasBorder)?(this.w + this.borderWidth):this.w)\n    }\n\n    get height(){\n        return (this.hasBorder)?this.h + this.borderWidth:this.h\n    }\n\n    get outOfBound(){\n        let [minX,maxX,minY,maxY] = this.findMax();\n        let {width,height} = this.parent.parent.canvas;\n        return (minX > width || maxX < 0 || minY > height || maxY < 0) \n    }\n\n    findVertex(){\n        return []\n    }\n\n    findMax(){\n        const vertex = this.findVertex()\n        const xs = []\n        const ys = []\n\n        vertex.forEach(([x,y])=>{\n            xs.push(x); ys.push(y)\n        })\n\n        let offsetMinX = - this.borderWidthIfBorderIsOn \n        let offsetMaxX = this.borderWidthIfBorderIsOn \n        let offsetMinY = - this.borderWidthIfBorderIsOn \n        let offsetMaxY = this.borderWidthIfBorderIsOn \n\n        if(this.shadow){\n            let shadowOffsetMinX = -this.shadow.blur -2\n            let shadowOffsetMaxX = this.shadow.blur + 2\n            let shadowOffsetMinY = -this.shadow.blur -2\n            let shadowOffsetMaxY = this.shadow.blur +2\n            if(this.shadow.offsetX){\n                shadowOffsetMinX += this.shadow.offsetX\n                shadowOffsetMaxX += this.shadow.offsetX\n            }\n            if(this.shadow.offsetY){\n                shadowOffsetMinY += this.shadow.offsetY\n                shadowOffsetMaxY += this.shadow.offsetY\n            }\n            if(shadowOffsetMinX<0) offsetMinX += shadowOffsetMinX\n            if(shadowOffsetMaxX>0) offsetMaxX += shadowOffsetMaxX\n            if(shadowOffsetMinY<0) offsetMinY += shadowOffsetMinY\n            if(shadowOffsetMaxY>0) offsetMaxY += shadowOffsetMaxY\n        }\n\n        return [\n            Math.min(...xs) + offsetMinX,\n            Math.max(...xs) + offsetMaxX,\n            Math.min(...ys) + offsetMinY,\n            Math.max(...ys) + offsetMaxY\n        ]\n    }\n\n    get borderWidthIfBorderIsOn(){\n        if(this.border||this.borderOnly) return this.borderWidth\n        return 0\n    }\n\n    pointInShape(x,y){\n        let sides = this.findSides()\n        const [minX,maxX,minY,maxY] = this.findMax()\n        let distance = findDistance2Point(x,y,maxX,maxY)\n        let compareSide = [x,y,x+distance,y]\n        let intersect = 0\n        if(x>maxX||x<minX||y>maxY||y<minY) return false\n        sides.forEach(e=>{\n            if(findIntersection(e,compareSide)) intersect++\n        })\n        return !(intersect%2 === 0)\n    }\n\n    findSides(){\n        let vertex = this.findVertex()\n        let result = []\n        for(let i = 0;i<vertex.length;i++){\n            result.push([...vertex[i],...((vertex[i+1])?vertex[i+1]:vertex[0])])\n        }\n        return result\n    }\n\n    collide(shape){\n        if(shape.kind==='arc') return shape.collide(this)\n        let [maxX1,minX1,maxY1,minY1] = this.findMax()\n        let [maxX2,minX2,maxY2,minY2] = shape.findMax()\n        if (((minX1 < minX2) && (maxX1 > maxX2) && (minY1<minY2) && (maxY1>maxY2)) || ((minX2 < minX1) && (maxX2 > maxX1) && (minY2<minY1) && (maxY2>maxY1))) return true\n\n        let side1 = this.findSides()\n        let side2 = shape.findSides()\n\n        for (let s1 of side1){\n            for (let s2 of side2){\n                if(findIntersection(s1,s2)) return true\n            }\n        }\n        return false\n    }\n}\n\nlght.rect = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultRectOptions,this)\n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,1],[1,1]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\nlght.arc = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultArcOptions,this)\n    }\n\n    get radius(){\n        return (this.hasBorder)?this.rad + this.borderWidth : this.rad\n    }\n\n    get minAngle(){\n        return this.rotation\n    }\n\n    get maxAngle(){\n        return this.rotation + this.arcDegree\n    }\n\n    get minRadAngle(){\n        return degToRad(this.minAngle)\n    }\n\n    get maxRadAngle(){\n        return degToRad(this.maxAngle)\n    }\n\n    get pureCircle(){\n        return this.arcDegree===360\n    }\n\n    pointInShape(x,y){\n        var angle = findAngle2Point(this.absoluteX,this.absoluteY,x,y)\n        if (angle>this.minAngle && angle<this.maxAngle){\n            if(findDistance2Point(this.absoluteX,this.absoluteY,x,y)<=this.radius) return true\n        }\n        return false\n    }\n\n    findMax(){\n        let result = [this.absoluteX-this.radius,this.absoluteX+this.radius,this.absoluteY-this.radius,this.absoluteY+this.radius]\n        let xs = [this.absoluteX,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius]\n        let ys = [this.absoluteY,this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]\n        if(!this.pointInShape(result[0],this.absoluteY)) result[0] = Math.min(...xs) - this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(result[1],this.absoluteY)) result[1] = Math.max(...xs) + this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(this.absoluteX,result[2])) result[2] = Math.min(...ys) - this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(this.absoluteX,result[3])) result[3] = Math.max(...ys) + this.borderWidthIfBorderIsOn/2;\n        return result\n    }\n\n    findVertex(){\n        let [minX,maxX,minY,maxY] = this.findMax()\n        let referenceX = [this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteX+this.radius,this.absoluteX-this.radius,this.absoluteX]\n        let referenceY = [this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius,this.absoluteY+this.radius,this.absoluteY-this.radius,this.absoluteY]\n\n        return [\n            [minX,referenceY[referenceX.indexOf(minX)]],\n            [maxX,referenceY[referenceX.indexOf(maxX)]],\n            [referenceX[referenceY.indexOf(minY)],minY],\n            [referenceX[referenceY.indexOf(maxY)],maxY],\n        ]\n    }\n\n    fidnSides(){\n        if(this.arcDegree === 360) return false\n        return [\n            [this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.minRadAngle)*this.radius],\n            [this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]\n        ]\n    }\n\n    collide(shape){\n        let vertex1 = this.findVertex()\n        let vertex2 = shape.findVertex()\n\n        for(let [x,y] of vertex1){\n            if(shape.pointInShape(x,y)) return true\n        }\n        for(let [x,y] of vertex2){\n            if(this.pointInShape(x,y)) return true\n        }\n        if(shape.kind==='arc'){                \n            //when checking for intersection between 2 arcs, there are 2 cases\n            //Case 1: they are both circles. In this case the distance between the 2 center have to be smaller or equal to\n            //sum of radius for them to intersect\n\n            if(this.pureCircle && shape.pureCircle){\n                return findDistance2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY) <= this.radius + shape.radius\n            }\n\n            //Case 2: either of them are arcs\n            //In these cases, there are 2 scenarios\n            //Scenario 1: one of the vertexes will be inside the circle, this is easy to check\n            //Scenario 2: none of the vertex is inside the circle. There is only one possible explanation for this. In this case, check if \n            //the \"ray\" that connect the 2 center is inside both arcs, then check that the length of the ray is less than the length of both radius\n\n            if(findDistance2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY) > this.radius + shape.radius) return false\n\n            let ray1 = findAngle2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY)\n            let ray2 = findAngle2Point(shape.absoluteX,shape.absoluteY,this.absoluteX,this.absoluteY)\n            return ((ray1<this.maxAngle&&ray1>this.minAngle)&&(ray2<shape.maxAngle&&ray2>shape.minAngle))\n        }\n        else{\n            let side = shape.findSides()\n\n            for(let s of side){\n                let closest = findClosestPoint(this.absoluteX,this.absoluteY,s)\n                if(closest){\n                    if (this.pointInShape(closest[0],closest[1])) return true\n                }\n            }\n            return false\n        }\n    }\n}\n\nlght.roundedRectangle = class extends lght.rect{\n    constructor(property,parent){\n        super(property,parent)\n        this.borderRadius = (property.borderRadius) || 0\n        if(this.clip){\n            if(property.clipCanvas){\n                this.clipImage = property.clipCanvas;\n                this.clipCanvas=true\n            }\n            else{\n                this.clipImage = lght.sprite(this.clipImageLink,()=>{\n                    this.parent.updateVisual()\n                })\n            }\n        }\n    }\n\n    get clipImageLoaded(){\n        if(!this.clip) return false\n        if(this.clipCanvas) return true\n        return this.clipImage.complete\n    }\n}\n\nlght.poly = class extends lght.shape{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultPolyOptions,this)\n        if(this.clip){\n            this.clipImage = lght.sprite(this.clipImageLink,()=>{\n                this.parent.updateVisual()\n            })\n        }\n    }\n\n    get clipImageLoaded(){\n        if(!this.clip) return false\n        return this.clipImage.complete\n    }\n\n    get polyPoints(){\n        if(!this.specialPolygon) return this.points\n        const radiusCoefficient = 360/this.numberOfSide\n        const result = []\n        for(let i = 0;i<this.numberOfSide;i++){\n            result.push(calculateRotatePoint(0,0,radiusCoefficient*i,this.radius))\n        }\n        return result\n    }  \n\n    get width(){\n        return this.findMax()[1] - this.findMax()[0]\n    }\n\n    get height(){\n        return this.findMax()[3] - this.findMax()[2]\n    }\n\n    get sideLength(){\n        if(!this.specialPolygon) return null\n        const radiusCoefficient = degToRad(360/this.numberOfSide)\n        return Math.sqrt(2*Math.pow(this.radius,2) - 2*Math.pow(this.radius,2)*Math.cos(radiusCoefficient))\n    }\n\n    findVertex(){\n        return this.polyPoints.map(([x,y])=>rotatePoint(this.absoluteX,this.absoluteY,x+this.absoluteX,y+this.absoluteY,this.rotation))\n    }\n}\n\nlght.line = class extends lght.shape{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultLineOptions,this)\n    }\n\n    get rotatedPoints(){\n        return this.points.map(([x,y])=>(rotatePoint(this.absoluteX,this.absoluteY,x+this.absoluteX,y+this.absoluteY,this.rotation)))\n    }\n\n    findVertex(){\n        const result = []\n        const notIncluded = ([x,y]) => {\n            for (const position of result) {\n                const [x2,y2] = position\n                if(Math.round(x)===Math.round(x2) && Math.round(y)===Math.round(y2)) return false\n            }\n            return true\n        }\n        const point = [...this.rotatedPoints]\n        point.forEach(([x1,y1],index)=>{\n            if (index===point.length-1) return\n            const [x2,y2] = this.rotatedPoints[index+1]\n            const distance = findDistance2Point(x1,y1,x2,y2)\n            const tan = Math.atan((this.lineWidth/2)/distance)\n            const angle = findAngle2Point(x1,y1,x2,y2)\n            const angleQuadrant = radToDeg(tan)+angle\n            const firstDistance = Math.sqrt(distance*distance + (0.5*this.lineWidth)*(0.5*this.lineWidth))\n            const pointOneInFirstQuadrant = calculateRotatePoint(x1,y1,angleQuadrant,firstDistance)\n            const pointSecondInSecondQuadrant = calculateRotatePoint(...pointOneInFirstQuadrant,180+angle,distance)\n            const pointThreeInThirdQuadrant = calculateRotatePoint(...pointSecondInSecondQuadrant,270+angle,distance)\n            const pointFourInFourthQuadrant = calculateRotatePoint(...pointThreeInThirdQuadrant,angle,distance)\n            if(notIncluded(pointFourInFourthQuadrant)) result.push(pointFourInFourthQuadrant)\n            if(notIncluded(pointOneInFirstQuadrant)) result.push(pointOneInFirstQuadrant)\n            if(notIncluded(pointSecondInSecondQuadrant)) result.push(pointSecondInSecondQuadrant)\n            if(notIncluded(pointThreeInThirdQuadrant)) result.push(pointThreeInThirdQuadrant)\n        })\n        return result\n    }\n}\n\nlght.text = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultTextOptions,this)\n    }\n\n    get textSize(){\n        var c = lght.apps[0].context;\n        c.save();\n        c.font = this.font;\n        var width = c.measureText(this.text).width;\n        var height = c.measureText('gM').width;\n        c.restore();\n        return [width,height];\n    }\n\n    get w(){\n        return this.textSize[0] + this.borderWidthIfBorderIsOn\n    }\n\n    get h(){\n        return this.textSize[1] + this.borderWidthIfBorderIsOn\n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,0.5],[1,0.5]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\nlght.img = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultImgOptions,this)\n        this.sprite = lght.sprite(this.spriteLink,()=>{\n            if(this.loadedFunction) this.loadedFunction()\n            this.parent.updateVisual()\n        })\n    }\n\n    get imageLoaded(){\n        return this.sprite.complete\n    }\n\n    get w(){\n        if(this.drawWidth) return this.drawWidth\n        if(this.imageLoaded){\n            if(this.drawHeight) return (this.drawHeight*this.sprite.width)/this.sprite.height\n            return this.sprite.width\n        }\n        return 0\n    }\n\n    get h(){\n        if(this.drawHeight) return this.drawHeight\n        if(this.imageLoaded){\n            if(this.drawWidth) return (this.drawWidth*this.sprite.height)/this.sprite.width\n            return this.sprite.height\n        }\n        return 0 \n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,1],[1,1]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\n//Input\n //<--------------KEYBOARD INPUT GO HERE------------------->\n lght.object.prototype.attachQuickMovement = function (velocity,cooldown,func) {\n    var cd = true; var obj = this\n    document.addEventListener('keydown',function(key){\n        if(cd){\n            if(lght.inputReference.movementIndex.indexOf(key.key)!==-1){\n                obj.x += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][0]*velocity;\n                obj.y += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][1]*velocity;\n                obj.updateVisual();\n                if(func) func(key,obj);\n                cd = false; \n                setTimeout(()=>{cd = true;},cooldown)\n            }\n        }\n    })\n}\n\n//<--------------MOUSE INPUT GO HERE---------------------->\n\nlght.app.prototype.mouseInputInit = function(){\n    const attachEvent = (e,event)=>{\n        const [x,y] = this.translateMouseCoor(e)\n        if(this.objects.length === 0) return\n        for (let i = this.objects.length;i--;i>=0){\n            const obj = this.objects[i]\n            if(obj[event].length === 0) continue\n            if(!obj.display) continue\n            if(obj.pointInObject(x,y)){\n                for(let func of obj[event]) func(x,y)\n                break;\n            }\n        }\n        LargeLoop:for (let i = this.objects.length;i--;i>=0){\n            const obj = this.objects[i]\n            if(obj.shapes.length === 0) continue\n            if(!obj.display) continue\n            for(let a = obj.shapes.length;a--;a>=0){\n                const shape = obj.shapes[a]\n                if(shape[event].length === 0) continue\n                if(!shape.display) continue\n                if(shape.pointInShape(x,y)){\n                    for(let func of shape[event]) func(x,y)\n                    break LargeLoop;\n                }\n            }\n        }\n    }\n\n    this.canvas.addEventListener('mouseup',(e)=>attachEvent(e,'mouseUpEvent'))\n    this.canvas.addEventListener('mousemove',(e)=>attachEvent(e,'mouseMoveEvent'))\n    this.canvas.addEventListener('mousedown',(e)=>attachEvent(e,'mouseDownEvent'))\n}\n\n//PRESS EVENT FOR AN APP\nlght.object.prototype.pressedEvent = function (func) {\n    this.mouseUpEvent.push(func)\n}\n\n//MAKE AN OBJECT DRAGGABLE\nlght.object.prototype.makeDraggable = function (func,funcDone) {\n    this.onDrag = false; var obj = this; this.draggable = true;\n    var rx = 0; var ry = 0; \n\n    this.mouseDownEvent.push((x,y)=>{\n        if(obj.draggable){\n            if(!obj.onDrag){\n                obj.onDrag = true;\n                rx = x - obj.x; ry = y - obj.y;\n            }\n        }\n    })\n\n    document.addEventListener('mousemove', (e) => {\n        var c = this.parent.translateMouseCoor(e);\n        if(c[0] < 0 || c[0] >this.parent.canvas.width || c[1] < 0 || c[1] > this.parent.canvas.height) obj.onDrag = false\n        if(obj.onDrag){\n            obj.x = c[0] - rx; obj.y = c[1] - ry;\n            obj.updateVisual();\n            if(typeof func == 'function') func(obj);\n        }\n    })\n\n    this.parent.canvas.addEventListener('mouseup', (e) => {\n        if(obj.onDrag){\n            obj.onDrag = false;\n            if(funcDone) funcDone()\n        }\n    })\n}\n\n//HOVER EVENT\nlght.object.prototype.hoverEvent = function (funcin,funcout)  {\n    this.mouseIn = false; var obj = this;\n    document.addEventListener('mousemove', (e)=>{\n        var c = this.parent.translateMouseCoor(e);\n        if(c[0] < 0 || c[0] >this.parent.canvas.width || c[1] < 0 || c[1] > this.parent.canvas.height){\n            obj.mouseIn = false; if (funcout){funcout(obj);obj.updateVisual();};\n            return;\n        }\n        var touch = obj.pointInObject(c[0],c[1]);\n        if(obj.mouseIn && (!touch)){\n            obj.mouseIn = false; if (funcout){funcout(obj);obj.updateVisual();};\n        }\n        \n    })\n    this.mouseMoveEvent.push(()=>{\n        if(!obj.mouseIn){\n            obj.mouseIn = true; if(funcin){funcin(obj);obj.updateVisual();};\n        }\n    })\n}\n\n//INPUT FOR SHAPES\nlght.object.prototype.attachQuickMovement = function (velocity,cooldown,func) {\n    var cd = true; var obj = this\n    document.addEventListener('keydown',function(key){\n        if(cd){\n            if(lght.inputReference.movementIndex.indexOf(key.key)!==-1){\n                obj.x += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][0]*velocity;\n                obj.y += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][1]*velocity;\n                obj.updateVisual();\n                if(func) func(key,obj);\n                cd = false; \n                setTimeout(()=>{cd = true;},cooldown)\n            }\n        }\n    })\n}\n\n//<--------------MOUSE INPUT GO HERE---------------------->\n\n//PRESS EVENT FOR AN APP\nlght.shape.prototype.pressedEvent = function (func) {\n    this.mouseUpEvent.push(func)\n}\n\n//HOVER EVENT\nlght.shape.prototype.hoverEvent = function (funcin,funcout)  {\n    this.mouseIn = false; var obj = this;\n    document.addEventListener('mousemove', (e)=>{\n        if(!this.display) return\n        var c = this.parent.parent.translateMouseCoor(e);\n        if(c[0] < 0 || c[0] >this.parent.parent.canvas.width || c[1] < 0 || c[1] > this.parent.parent.canvas.height){\n            obj.mouseIn = false; if (funcout){funcout(obj);obj.parent.updateVisual();};\n            return;\n        }\n        var touch = obj.pointInShape(c[0],c[1]);\n        if(obj.mouseIn && (!touch)){\n            obj.mouseIn = false; if (funcout){funcout(obj);obj.parent.updateVisual();};\n        }\n        \n    })\n    this.mouseMoveEvent.push(()=>{\n        if(!obj.mouseIn){\n            obj.mouseIn = true; if(funcin){funcin(obj);obj.parent.updateVisual();};\n        }\n    })\n}\n\n//Animation\nlght.app.prototype.animate = function() {\n    if(lght.frameTime !== undefined && lght.lastFrame !== undefined){\n        let timeDifference = lght.frameTime - lght.lastFrame\n        this.objects.forEach(e => {\n            e.animate(timeDifference);\n            e.shapes.forEach(a => {\n                a.animate(timeDifference)\n            })\n        });\n    }\n}\n\nconst addAnimation = function(property,value,time,func){\n    this.animationCount++;\n    let id = this.animationCount;\n\n    let timeout = setTimeout(()=>{\n        changeByDotNotation(property,this,value)\n        this.cancelAnimation(id)\n        if (this.parent.updateVisual) this.parent.updateVisual()\n        else this.updateVisual()\n        if(func) func();\n    },time)\n\n    const alreadyAnimated = this.animations.find((animation)=>animation[0] === property)\n    if(alreadyAnimated){\n        this.cancelAnimation(alreadyAnimated[6])\n    }\n\n    this.animations.push([property,value,getByDotNotation(property,this),time,timeout,func,id]);\n    return id;\n}\n\nconst cancelAnimation = function(){\n    for(let id of [...arguments]){\n        let animation = this.animations.find(e=>e[6] === id)\n        let index = this.animations.findIndex(e=>e[6]===id)\n        if(!animation) return false\n        clearTimeout(animation[4])\n        this.animations.splice(index,1)\n    }\n}\n\nconst animate = function (time){\n    let obj = this\n    this.animations.forEach(animation=>{\n        let [property,value,init,timeUp] = animation\n        let newValue = getByDotNotation(property,obj) + (time/timeUp)*(value-init)\n        if(init < value && newValue > value) newValue = value\n        if(init>value && newValue < value) newValue = value\n        changeByDotNotation(property,obj,newValue)\n        if (this.parent.updateVisual) this.parent.updateVisual()\n        else this.updateVisual()\n    })\n}\n\nlght.animateFunctionReference = {\n    animate,\n    addAnimation,\n    cancelAnimation,\n}\n\nfor(var prop in lght.animateFunctionReference){\n    lght.object.prototype[prop] = lght.animateFunctionReference[prop];\n    lght.shape.prototype[prop] = lght.animateFunctionReference[prop];\n}\n\n//Draw\nlght.app.prototype.render = function(){\n    this.clearCanvas();\n    this.fillBackground();\n    this.renderShape();\n}\n\nlght.app.prototype.visualInit = function(){\n    this.backgroundColor = this.options.background;\n    this.context = this.canvas.getContext(\"2d\");\n}\n\nlght.app.prototype.renderShape = function(){\n    this.renderPositions();\n\n    this.objects.sort((a,b)=>a.zIndex -b.zIndex).forEach(obj=>{\n        if(obj.static) obj.drawPreloader();\n        else obj.draw();\n    })\n}\n\n//<-------------------BASIC CANVAS STUFF---------------------->\n//CLEARING CANVAS AND BACKGROUND COLOR\nlght.app.prototype.clearCanvas = function(){\n    this.context.save(); \n    this.context.clearRect(0,0,this.canvas.width,this.canvas.height); \n    this.context.restore();\n}\n\nlght.app.prototype.fillBackground = function(){\n    if(this.backgroundColor!=='none'){\n        this.context.save(); \n        this.context.fillStyle = this.backgroundColor;\n        this.context.fillRect(0,0,this.canvas.width,this.canvas.height);\n        this.context.restore();\n    }\n}\n\n/*POSITION INDICATOR FUNCTIONS GO HERE\nDraw all position indicators at once to save performance from context state change*/\nlght.app.prototype.renderPositions = function(){\n    this.context.save();\n    this.context.fillStyle = 'red';\n\n    this.objects.forEach(({x,y,positionIndicator}) => {\n        if(!positionIndicator) return\n        this.context.beginPath()\n        this.context.arc(x,y,5,0,2*Math.PI)\n        this.context.closePath()\n        this.context.fill()\n    });\n    \n    this.context.restore();\n}\n\n\n/* SHAPE PRERENDERING FUNCTIONS GO HERE\nShape prerendering prerender shapes on canvases to save performance*/\n\nlght.object.prototype.updateVisual = function(){\n    //If the dimension changes a new canvas have to be created\n    var max = this.findMax();\n    for(var i = 0;i<max.length;i++){\n        if(Math.round(max[i])!==Math.round(this.preloader.maxes[i])){\n            this.createPreloader(); return;\n        }\n    }\n\n    this.clearPreloader();\n\n    this.shapes.forEach(s=>{\n        let x = this.preloader.ox + s.x\n        let y = this.preloader.oy + s.y\n        lght.drawShape(this.preloader.context,x,y,s,)\n    })\n}\n\nlght.object.prototype.clearPreloader = function(){\n    this.preloader.context.clearRect(0,0,this.preloader.width,this.preloader.height);\n}\n\nlght.object.prototype.createPreloader = function(){\n    this.preloader = document.createElement('canvas');\n    \n    this.preloader.maxes = this.findMax();\n    let [minX,maxX,minY,maxY] = this.preloader.maxes\n\n    this.preloader.width = maxX-minX;\n    this.preloader.height = maxY-minY;\n\n    this.preloader.ox = this.x - minX;\n    this.preloader.oy = this.y - minY;\n\n    this.preloader.context = this.preloader.getContext('2d');\n\n    this.updateVisual();\n}\n\nlght.object.prototype.drawPreloader = function(){\n    if(!this.display) return\n    if(this.preloader.width >0 && this.preloader.height > 0){\n        let x = this.preloader.maxes[0] + this.preloader.width/2;\n        let y = this.preloader.maxes[2] + this.preloader.height/2;\n        x = Math.ceil(x); y = Math.ceil(y);\n\n        this.parent.context.save()\n        this.parent.context.translate(x,y)\n        lght.drawImg(this.parent.context,this.preloader,this.preloader.width,this.preloader.height);\n        this.parent.context.restore()\n    }\n}\n\n\n//<------------------SHAPE DRAWING FUNCTION---------------->\nlght.object.prototype.draw = function(){\n    if(!this.display) return\n    this.shapes.forEach(s=>{\n        lght.drawShape(this.parent.context,this.x+s.x,this.y+s.y,s)\n    })\n}\n\n//MASTER FUNCTION\nlght.drawShape = function(c,x,y,shape){\n    if(!shape.display) return\n    if(shape.border || shape.borderOnly) this.drawShapeKind(c,shape,x,y,true,1,shape.borderColor,shape.shadow);\n    else if(!shape.borderOnly && !shape.border) this.drawShapeKind(c,shape,x,y,false,shape.opacity,shape.color,shape.shadow);\n    if(!shape.borderOnly) this.drawShapeKind(c,shape,x,y,false,shape.opacity,shape.color);\n}\n\nlght.drawShapeKind = function(c,s,x,y,stroke,opacity,color,shadow){\n    opacity = opacity * s.parent.opacity;\n    if(opacity == 0 || opacity <0 ) return\n    x= Math.ceil(x); y = Math.ceil(y);\n\n    c.save()\n    c.globalAlpha = opacity\n    c.fillStyle = color\n    c.strokeStyle = color\n    c.lineWidth = s.borderWidth\n    c.translate(x,y)\n\n    if(shadow){\n        const {color,blur,offsetX,offsetY} = shadow\n        c.shadowColor = color\n        c.shadowBlur = blur\n        c.shadowOffsetX = offsetX\n        c.shadowOffsetY = offsetY\n    }\n\n    switch(s.kind){\n        case 'rect':\n            lght.drawRect(c, s.w, s.h, s.rotation, stroke); break;\n        case 'arc':\n            lght.drawArc(c, s.rad,s.arcDegree,s.rotation, stroke); break;\n        case 'text':\n            lght.drawText(c, s.text,s.font, stroke,s.textAlign ,s.w, s.h,s.rotation); break;\n        case 'img':\n            if(s.imageLoaded) lght.drawImg(c, s.sprite,s.w,s.h,s.rotation); break;\n        case 'poly':\n            lght.drawPoly(c, s.polyPoints,s.rotation, stroke); break;\n        case 'line':\n            if(stroke){\n                const points = s.points.map(((position,index)=>{\n                    const [x,y] = position\n                    if(index === 0){\n                        const angle = degToRad(findAngle2Point(...position,...s.points[index+1]))\n                        return [x-s.borderWidth*Math.cos(angle),y+s.borderWidth*Math.sin(angle)]\n                    }\n                    else if(index === s.points.length-1){\n                        const angle = degToRad(findAngle2Point(...position,...s.points[index-1]))\n                        return [x-s.borderWidth*Math.cos(angle),y+s.borderWidth*Math.sin(angle)]\n                    }\n                    else return [x,y]\n                }))\n                lght.drawLine(c,points,s.rotation,s.lineWidth+s.borderWidth);\n            }\n            else lght.drawLine(c,s.points,s.rotation,s.lineWidth); break;\n        case 'roundedRectangle':\n            lght.drawRoundedRectangle(c,s.w,s.h,s.rotation,s.borderRadius,stroke)\n            break\n        default:\n            break\n    }\n    if(s.clip && s.clipImageLoaded){\n        c.clip()\n        c.rotate(degToRad(s.rotation))\n        c.drawImage(s.clipImage,-s.width/2,-s.height/2,s.width,s.height)\n    }\n\n    c.restore()\n}\n\n//DRAWING RECTANGLE\nlght.drawRect = function(c,w,h,rotation,stroke){\n    c.rotate(degToRad(360-rotation))\n    if(stroke) c.strokeRect(-w/2,-h/2,w,h);\n    else c.fillRect(-w/2,-h/2,w,h);\n}\n\nlght.drawRoundedRectangle = (c,w,h,rotation,borderRadius,stroke)=>{\n    c.rotate(degToRad(360,rotation))\n    c.beginPath()\n    c.moveTo(0,-h*0.5)\n    c.lineTo(-w*0.5+borderRadius,-h*0.5)\n    c.quadraticCurveTo(-w*0.5,-h*0.5,-w*0.5,-h*0.5+borderRadius)\n    c.lineTo(-w*0.5,h*0.5-borderRadius)\n    c.quadraticCurveTo(-w*0.5,h*0.5,-w*0.5+borderRadius,h*0.5)\n    c.lineTo(w*0.5-borderRadius,h*0.5)\n    c.quadraticCurveTo(w*0.5,h*0.5,w*0.5,h*0.5-borderRadius)\n    c.lineTo(w*0.5,-h*0.5+borderRadius)\n    c.quadraticCurveTo(w*0.5,-h*0.5,w*0.5-borderRadius,-h*0.5)\n    c.lineTo(0,-h*0.5)\n    c.closePath()\n    if(stroke) c.stroke()\n    else c.fill()\n}\n\n//DRAWING CIRCLES\nlght.drawArc = function(c,rad,arcDegree,rotation,stroke){\n    c.beginPath();\n\n    const br = degToRad(360 - rotation - arcDegree);\n    const er = degToRad(360 - rotation);\n\n    if(arcDegree < 360){\n        const [x,y] = rotatePoint(0,0,rad,0,360-rotation-arcDegree);\n        c.moveTo(x,y); c.moveTo(0,0);\n    }\n\n    c.arc(0,0,rad,br,er);\n\n    if(stroke) c.stroke();\n    else c.fill();\n    c.closePath();\n\n}\n\n//DRAWING TEXT\n\nlght.drawText = function(c,text,font,stroke,textAlign,width,height,rotation){\n    c.textAlign = textAlign;\n    c.font = font;\n    c.rotate(degToRad(360-rotation))\n    if(stroke) c.fillText(text,Math.ceil(-width/2),Math.ceil(height/3.5));\n    else c.fillText(text,Math.ceil(-width/2),Math.ceil(height/3.5))\n}\n\n//DRAWING IMAGES\nlght.drawImg = function(c,sprite,w,h,rotation){\n    c.rotate(degToRad(360-rotation));\n    c.drawImage(sprite,-w/2,-h/2,w,h);\n}\n\nlght.drawPoly = (c,points,rotation,stroke) => {\n    if(points.length === 0 || !points) return \n    c.rotate(degToRad(360-rotation))\n    c.beginPath()\n    c.moveTo(...points[0])\n    points.forEach(([x,y])=>c.lineTo(x,y))\n    c.closePath()\n    if(stroke) c.stroke()\n    else c.fill()\n}\n\nlght.drawLine = (c,points,rotation,lineWidth)=>{\n    c.beginPath()\n    c.rotate(degToRad(360-rotation))\n    c.moveTo(...points[0])\n    points.forEach(([x,y])=>c.lineTo(x,y))\n    c.lineWidth = lineWidth\n    c.stroke()\n}\n\nlght.object.prototype.addShape = function (property) {\n    let shape = new lght[property.kind](property,this);\n    this.updateVisual()\n    return shape\n}\n\nlght.app.prototype.addObject = function (property) {\n    return new lght.object(property,this);\n}\n\nlght.app.prototype.removeObject = function (obj) {\n    this.objects.splice(this.objects.indexOf(obj),1);\n}\n\nexport default lght","import { random ,findAngle2Point, degToRad} from '../lght/util/util';\nimport lght from '../lght/lght'\n\nclass View{\n    constructor(canvas){\n        this.app = new lght.app(canvas)\n        this.app.canvas.width = 1700\n        this.app.canvas.height = 1300\n        this.app.backgroundColor = '#00d7e1';\n\n        const addLayerViaName = (...args)=>[...args].forEach(name=>this[name] = this.addLayer())\n        \n        addLayerViaName('background','resourceElement','buttonElement','portElement','roadElement','structureElement','robberElement','diceElement')\n\n        this.hexProperty = {\n            kind:'poly',\n            radius:80,\n            numberOfSide:6,\n            rotation:90,\n            specialPolygon:true,\n            color:'green',\n        }\n\n        this.inititiateArray('hexMap','buttonMap','numberMap','dotMap','portMap',\"houses\",\"city\",\"roads\",\"settlements\",\"cities\",\"structures\")\n\n        this.getPositionMatrix()\n\n        this.createDiceDeck()\n        this.createDevDeck()\n        this.createActionObject()\n        this.createPlayerDeck()\n        this.drawAnnouncement()\n        this.setUpResourceIcon()\n        this.setUpTurnTimer()\n        this.configureStartGameMessage()\n        this.configureMonopolyResourceInterface()\n    }\n    //250 360\n\n    configureColorCode(playerCode,turnObject){\n        this.colorCode = playerCode\n        this.turnObject = turnObject\n    }\n\n    get currentColorCode(){\n        return this.colorCode[this.turnObject.turn]\n    }\n\n    configureStartGameMessage(){\n        const startGameObject = this.app.addObject({x:this.app.canvas.width-150,y:this.app.canvas.height-120,display:false})\n        const text = startGameObject.addShape({kind:'text',text:'Start Game',color:'orange',font:'40px Times News Roman'})\n        startGameObject.addShape({kind:'roundedRectangle',w:200,h:100,display:false})\n        let activated = false\n        let resolveFunction = ()=>{}\n        const fadeIn = ()=>{\n            if(!activated){\n                text.opacity = 1;\n            }\n            else text.addAnimation('opacity',1,1000,fadeOut)\n        }\n        const fadeOut = ()=>{\n            if(!activated){\n                text.opacity = 1\n            }\n            else text.addAnimation('opacity',0,1000,fadeIn)\n        }\n\n        startGameObject.pressedEvent(()=>{\n            activated = false\n            startGameObject.display = false\n            resolveFunction()\n        })\n\n        this.initiateStartGameMessage = (func=()=>{})=>{\n            if(!activated){\n                resolveFunction = func\n                activated = true\n                startGameObject.display = true\n                fadeOut()\n            }\n        }\n        this.turnOffStartGameMessage = ()=>{\n            startGameObject.display = false\n        }\n    }\n\n    addYellowHoverEvent(shape){\n        let previousColor = shape.color\n        shape.hoverEvent(()=>{\n            previousColor = shape.color\n            shape.color = 'yellow';\n            shape.parent.updateVisual()\n        },()=>{\n            shape.color = previousColor\n            shape.parent.updateVisual()\n        })\n    }\n\n    configureStealInterface(model){\n        const imageReference = ['assets/wheatIcon.png','assets/rockIcon.png','assets/sheepIcon.png','assets/woodIcon.png','assets/brickIcon.png']\n        const resourceReference = ['wheat','rock','sheep','wood','brick']\n\n        this.halfCard = this.addLayer()\n        this.stealInterface = this.addLayer()\n\n        this.halfCard.display = false\n        const halfw = 400; const halfh = 300\n        this.halfCard.addShape({kind:'roundedRectangle',w:400,h:300,color:'#ffffed',borderRadius:20,border:true,borderColor:'black',borderWidth:10,shadow:{blur:7,offsetX:3,color:'black'}})\n        const letterHeadText = this.halfCard.addShape({kind:'text',font:'30px Times News Roman',y:-halfh/2+20,text:'Discard your cards'})\n        \n        let numberLeftText = 'Need to Discard'\n        let numberLeftElement = this.halfCard.addShape({kind:'text',font:'25px Times News Roman',y:-halfh/2 + 55,text:`${numberLeftText}: 4`,color:'grey'})\n\n        let drawWidth = 45\n        let spacing = 30\n        let total = resourceReference.length * (drawWidth + spacing)\n        \n        //data\n        let numberChosen = [0,0,0,0,0]\n        let numberNeeded = 0\n        let numberLeft = [0,0,0,0,0]\n        let mode = 'steal'\n        //steal/plenty\n        let actionFunction = ()=>{}\n        const actionFuctionFactory = (func)=>{\n            actionFunction = (numberChosen)=>{\n                this.halfCard.display = false\n                func(numberChosen)\n            }\n        }\n        let getNumberLeft = ()=>numberChosen.map((e,i)=>model[`${resourceReference[i]}Amount`] + ((mode==='steal')?-1:1)*numberChosen[i])\n\n        //elements\n        let icons = []\n        let numbers = []\n        let chosen = []\n        let addModifier = []\n        let subtractModifier = []\n\n        let modifierFunctionFactory = (func)=>()=>{func();updateNumbers()}\n        for(let i = 0;i<resourceReference.length;i++){\n            let x = -total/2 + 15 + 0.5*drawWidth + i*(drawWidth+spacing)\n            icons.push(this.halfCard.addShape({kind:'img',drawWidth,y:-20,spriteLink:imageReference[i],x}))\n            numbers.push(this.halfCard.addShape({kind:'text',y:20,font:'25px Times News Roman',x,text:`(2)`,color:'gray'}))\n            chosen.push(this.halfCard.addShape({kind:'text',y:50,font:'25px Times News Roman',x,text:`0`,color:'gray'}))\n            let leftModifier = this.halfCard.addShape({kind:'text',y:80,font:'35px Times News Roman',text:'+',x:x-10})\n            let rightModifier = this.halfCard.addShape({kind:'text',y:80,font:'35px Times News Roman',text:'-',x:x+10})\n            this.addYellowHoverEvent(leftModifier)\n            this.addYellowHoverEvent(rightModifier)\n            addModifier.push(leftModifier)\n            subtractModifier.push(rightModifier)\n            \n            // eslint-disable-next-line no-loop-func\n            leftModifier.pressedEvent(modifierFunctionFactory(()=>{\n                if(!numberNeeded) return\n                if(!(model[`${resourceReference[i]}Amount`] - numberChosen[i])) return\n                numberChosen[i]++\n                numberNeeded-=1\n            }))\n\n            // eslint-disable-next-line no-loop-func\n            rightModifier.pressedEvent(modifierFunctionFactory(()=>{\n                if(!numberChosen[i]) return\n                numberChosen[i]--\n                numberNeeded+=1\n            }))\n        }\n        let acceptSymbol = this.halfCard.addShape({kind:'img',spriteLink:'assets/tickIcon.png',drawWidth:30,y:halfh/2-25})\n        acceptSymbol.pressedEvent(()=>{\n            actionFunction(numberChosen)\n        })\n        let updateNumbers = ()=>{\n            numberLeftElement.text = `${numberLeftText} ${numberNeeded}`\n            numberLeft = getNumberLeft()\n            numberChosen.forEach((e,i)=>{\n                numbers[i].text = `(${numberLeft[i]})`\n                chosen[i].text = e\n            })\n            if(numberNeeded) acceptSymbol.display = false\n            else acceptSymbol.display = true\n            this.halfCard.updateVisual()\n        }\n\n        this.initiateSteal = (cardNeeded)=>new Promise(r=>{\n            mode = 'steal'\n            letterHeadText.text = 'Discard your cards'\n            numberLeftText = 'Card to discard:'\n            numberNeeded = cardNeeded\n            numberChosen = [0,0,0,0,0]\n            numberLeft = getNumberLeft()\n            actionFuctionFactory(r)\n            updateNumbers()\n            this.halfCard.display = true\n        })\n\n        this.initiatePlenty = ()=>new Promise(r=>{\n            mode = 'plenty'\n            letterHeadText.text = 'Choose your card'\n            numberLeftText = 'Card to choose:'\n            numberNeeded = 2\n            numberChosen = [0,0,0,0,0]\n            numberLeft = getNumberLeft()\n            actionFuctionFactory(r)\n            updateNumbers()\n            this.halfCard.display = true\n        })\n        \n        let resolve\n        this.stealInterface.addShape({kind:'roundedRectangle',w:300,h:300,color:'#ffffed',borderRadius:20,border:true,borderColor:'black',borderWidth:10,shadow:{blur:7,offsetX:3,color:'black'}})\n        this.stealInterface.addShape({kind:'text',font:'30px Times New Roman',y:-120,text:'Steal from...',color:'grey'})\n        let stealTextProp = {kind:'text',font:'35px Times News Roman'}\n        let positions = [this.stealInterface.addShape({...stealTextProp,y:-70,display:false}),\n                        this.stealInterface.addShape({...stealTextProp,y:0,display:false}),\n                        this.stealInterface.addShape({...stealTextProp,y:70,display:false})]\n        positions.forEach((e,i)=>{\n            this.addYellowHoverEvent(e)\n            e.pressedEvent(()=>{\n                positions.forEach((e)=>e.display = false)\n                this.stealInterface.display = false\n                resolve(i)\n            })\n        })\n        this.stealInterface.display = false\n        \n        \n        this.initiateStealFromOther = (usernames,color)=>{\n            return new Promise((r)=>{\n                resolve = r\n                usernames.forEach((e,i)=>{\n                    positions[i].text = e\n                    positions[i].color = color[i]\n                    positions[i].display = true\n                    console.log(color[i])\n                })\n                console.log(positions)\n                this.stealInterface.updateVisual()\n                this.stealInterface.display = true\n            })\n        }\n    }\n\n    configureMonopolyResourceInterface = ()=>{\n        const monopoly = this.addLayer()\n        monopoly.display = false\n        monopoly.addShape({kind:'roundedRectangle',w:400,h:200,color:'#ffffed',borderRadius:10,border:true,borderColor:'black',borderWidth:10,shadow:{blur:7,offsetX:3,color:'black'}})\n        monopoly.addShape({kind:'text',text:'Choose Monopoly Resource:',font:'25px Times News Roman',y:-80})\n        const resourceReference = ['wheat','rock','sheep','wood','brick']\n        const imageReference = ['assets/wheatIcon.png','assets/rockIcon.png','assets/sheepIcon.png','assets/woodIcon.png','assets/brickIcon.png']\n        const drawWidth = 45\n        const spacing = 35\n        const w = 400\n        const total = resourceReference.length*(drawWidth) + (resourceReference.length-1)*spacing\n        let resolveFunction = ()=>{}\n        const icons = imageReference.map((link,i)=>{\n            const shape = monopoly.addShape({kind:'img',drawWidth,spriteLink:link,x:-total/2 + 0.5*drawWidth + i*spacing + i*drawWidth})\n            shape.hoverEvent(()=>{\n                shape.addAnimation('drawWidth',65,200)\n            },()=>{\n                shape.addAnimation('drawWidth',drawWidth,200)\n            })\n            shape.pressedEvent(()=>{\n                monopoly.display = false\n                resolveFunction(resourceReference[i])\n            })\n            return shape\n        })\n        this.initiateMonpolyResourceChoosing = ()=>{\n            monopoly.display = true\n            return new Promise(r=>resolveFunction = r)\n        }\n    }\n\n    receiveData({grid,playerUsernames}){\n        const {resourceBoard,numberBoard} = grid\n        this.resourceBoard = resourceBoard\n        this.numberBoard = numberBoard\n        this.createBoard()\n        //Finding the desert to add the robber\n        let robberPosition\n        BigLoop:for(let y = 0;y<this.resourceBoard.length;y++){\n            for(let x=0;x<this.resourceBoard[y].length;x++){\n                if(this.resourceBoard[y][x] === 'Desert'){\n                    robberPosition = [y,x]\n                    break BigLoop\n                }\n            }\n        }\n        let [robberX,robberY] = this.positionMatrix[robberPosition[0]-1][robberPosition[1]-1]\n        this.robber = this.addRobber(robberX,robberY)\n    }\n\n    moveRobber(location){\n        let [robberX,robberY] = this.positionMatrix[location[1]-1][location[0]-1]\n        robberX = this.resourceElement.x + robberX\n        robberY = this.resourceElement.y + robberY\n        this.robberElement.addAnimation('x',robberX,500)\n        this.robberElement.addAnimation('y',robberY,500)\n    }\n\n    selectSettlementLocationFrom(l){\n        return new Promise(r=>{\n            const locations = l.map(loc=>{\n                const house = this.drawPossibleSettlement(loc)\n                house.pressedEvent(()=>{\n                    locations.forEach(e=>e.kill())\n                    r(loc)\n                })\n                return house\n            })\n        })\n    }\n\n    drawAllPossibleSettlementLocation(locations){\n        const shapes = []\n        locations.forEach((l,i)=>{\n            const shape = this.drawPossibleSettlement(l)\n            shape.location = l\n            shapes.push(shape)\n        })\n        return shapes\n    }\n\n    setUpTurnTimer(){\n        this.turnTimer = null\n        this.turnTimerInterval = null\n        this.turnTimerElement = this.app.addObject({x:100,y:70,display:false})\n        this.turnTimerText = this.turnTimerElement.addShape({kind:'text',color:'blue',font:'50px Times News Roman',text:30})\n        this.turnTimerElement.addShape({kind:'roundedRectangle',w:70,h:70,display:false})\n        this.turnTimerElement.addShape({kind:'text',font:'25px Times News Roman',text:'Time left:',y:-40})\n        this.startTurnTimer = (time)=>{\n            this.cancelTurnTimer()\n            let timeLeft = time/1000\n            this.turnTimerInterval = setInterval(()=>{\n                this.turnTimerText.text = timeLeft\n                this.turnTimerElement.updateVisual()\n                timeLeft--\n            },1000)\n            this.turnTimer = setTimeout(()=>this.turnTimerElement.addAnimation('opacity',0,1000,()=>this.turnTimerElement.display = false),time)\n            this.turnTimerElement.display = true\n            this.turnTimerElement.opacity = 0\n            this.turnTimerElement.addAnimation('opacity',1,1000)\n        }\n        this.cancelTurnTimer = ()=>{\n            clearInterval(this.turnTimerInterval)\n            clearTimeout(this.turnTimer)\n            this.turnTimerElement.addAnimation('opacity',0,1000,()=>this.turnTimerElement.display = false)\n        }\n    }\n\n    animateResourceToLeaderBoard(res,[posY,posX]){\n        const makeResourceIcon = (link)=>this.robberElement.addShape({kind:'img',drawWidth:40,spriteLink:link,display:false})\n        const [x,y] = this.positionMatrix[posY][posX]\n        const resource = makeResourceIcon(`assets/${res}Icon.png`)\n        resource.x = x\n        resource.y = y\n        resource.display = true\n        const [toX,toY] = this.findDistanceFromShapeTo(resource,this.leaderBoardObject)\n        resource.addAnimation('x',toX,1000,()=>resource.kill())\n        resource.addAnimation('y',toY,1000)\n    }\n\n    setUpResourceIcon(){\n        const makeResourceIcon = (link)=>this.robberElement.addShape({kind:'img',drawWidth:40,spriteLink:link,display:false})\n        this.wheatResourceIcon = makeResourceIcon('assets/wheatIcon.png')\n        this.rockResourceIcon = makeResourceIcon('assets/rockIcon.png')\n        this.brickResourceIcon = makeResourceIcon('assets/brickIcon.png')\n        this.sheepResourceIcon = makeResourceIcon('assets/sheepIcon.png')\n        this.woodResourceIcon = makeResourceIcon('assets/woodIcon.png')\n    }\n\n    animateDevCardToLeaderBoard(){\n        this.animateDevCard.display = true\n        this.animateDevCard.addAnimation('x',this.animateDevCard.x + (this.leaderBoardObject.x - this.animateDevCard.absoluteX),500,()=>{\n            this.animateDevCard.x = 0\n            this.animateDevCard.display =  false\n        })\n    }\n\n    animateDevCardToPlayerDeck(){\n        console.log('fired')\n        this.animateDevCard.display = true\n        console.log(this.animateDevCard.y)\n        this.animateDevCard.addAnimation('y',1000,800,()=>{\n            console.log('done')\n            this.animateDevCard.y = 0\n            console.log(this.animateDevCard.y)\n            this.animateDevCard.display =  false\n        })\n    }\n\n    createTradingObject(usernames,model){\n        const w= 700\n        const h = 700\n        let mode = 'send'\n        let onTrade = false\n        const queue = []\n        let proposer = ''\n        let bankAmountAllowed = 0\n        let cancelTrade = ()=>{}\n        let proposeTrade = ()=>{}\n        let receiveMode = 'Accept'\n        //Mode is either send,receive, or bank\n        \n        this.tradingElement = this.addLayer()\n        this.tradingElement.display = false\n        const addYellowHoverEvent = shape=>{\n            let previousColor = shape.color\n            shape.hoverEvent(()=>{\n                shape.color = 'yellow';\n                this.tradingElement.updateVisual()\n            },()=>{\n                shape.color = previousColor\n                this.tradingElement.updateVisual()\n            })\n        }\n        this.tradingElement.addShape({kind:'roundedRectangle',w,h,color:'#ffffed',borderRadius:40,border:true,borderColor:'black',borderWidth:10,shadow:{blur:7,offsetX:3,color:'black'}})\n        this.tradingElement.addShape({kind:'text',y:-h/2+45, font:'bold 40px Times News Roman',text:'Trade'})\n        this.tradingElement.addShape({kind:'text',x:-w/2 + 200,y:-h/2+90,font:'30px Times News Roman',text:'My Resources'})\n        this.tradingElement.addShape({kind:'text',x:w/2 - 180,y:-h/2+90,font:'30px Times News Roman',text:'Resource Demanded'})\n        this.tradingElement.addShape({kind:'line',points:[[0,-h/2+90],[0,h/2 - 230]]})\n        this.tradingElement.addShape({kind:'line',points:[[-w/2 + 40, -h/2 + 120],[w/2 - 40, -h/2 + 120]]})\n        let ys = [-h/2+170,-h/2+230,-h/2+290,-h/2+350,-h/2+410]\n        const imageReference = ['assets/wheatIcon.png','assets/rockIcon.png','assets/sheepIcon.png','assets/woodIcon.png','assets/brickIcon.png']\n        const resourceReference = ['wheat','rock','sheep','wood','brick']\n        let amountGivenReference = [0,0,0,0,0]\n        let amountDemandReference = [0,0,0,0,0]\n        let proposeTo = [...usernames]\n        const createImageLine = (x)=>imageReference.forEach((image,index)=>this.tradingElement.addShape({kind:'img',spriteLink:image,drawWidth:40,x,y:ys[index]}))\n\n        let x = -w/2+100\n        createImageLine(x)\n        x = 60\n        createImageLine(x)\n\n        const addModifier = (icon,x,y,id,func)=>{\n            const modifier = this.tradingElement.addShape({kind:'text',text:icon,font:`50px Times News Roman`,x,y})\n            addYellowHoverEvent(modifier)\n            modifier.pressedEvent(()=>func(id))\n        }\n        let ys2 = ys.map((a)=>a-10)\n\n        const addModifierLine = (icon,x,func)=>ys2.map((y,index)=>addModifier(icon,x,y,index,func))\n        const addNumberLine = (numbers,x)=>numbers.map((number,index)=>this.tradingElement.addShape({kind:'text',text:number,font:'30px Times News Roman',x,y:ys[index],color:'gray'}))\n        x = -60\n        const modifierFunctionFactory = (func)=>(id)=>{\n            func(id);\n            if(mode === 'receive') propose.text = 'Counter propose'\n            if(mode === 'receive') receiveMode = 'Response'\n            updateNumbers();\n        }\n\n        const subtractModUser = addModifierLine('-',x,modifierFunctionFactory((id)=>{\n            if(!amountGivenReference[id]) return\n            if(mode === 'bank'){\n                let rate = 4\n                if(model.tradingPriveleges.randomTrade) rate = 3\n                if(model.tradingPriveleges[resourceReference[id]+\"Trade\"]) rate = 2\n                if(!bankAmountAllowed) return\n                else{\n                    bankAmountAllowed--\n                    return amountGivenReference[id]-=rate\n                }\n            }\n            amountGivenReference[id]--\n        }))\n        x = -180\n        const addModUser =  addModifierLine('+',x,modifierFunctionFactory((id)=>{\n            if(mode === 'bank'){\n                let rate = 4\n                if(model.tradingPriveleges.randomTrade) rate = 3\n                if(model.tradingPriveleges[resourceReference[id]+\"Trade\"]) rate = 2\n                if(model[resourceReference[id]+\"Amount\"] < ((amountGivenReference[id]+1) * rate)) return\n                else{\n                    bankAmountAllowed++\n                    return amountGivenReference[id]+=rate\n                }\n            }\n            if(model[`${resourceReference[id]}Amount`] - amountGivenReference[id]) amountGivenReference[id]++\n        }))\n        x=-120\n        const numberOfResourceGiven = addNumberLine(amountGivenReference,x)\n        x=130\n        addModifierLine('+',x,modifierFunctionFactory((id)=>{\n            if(mode === 'bank'){\n                if(bankAmountAllowed){\n                    amountDemandReference[id]++\n                    return bankAmountAllowed--\n                }\n                else return\n            }\n            amountDemandReference[id]++\n        }))\n        x=190\n        const numberOfResourceDemand = addNumberLine(amountDemandReference,x)\n        x=250\n        addModifierLine('-',x,modifierFunctionFactory((id)=>{\n            if(!amountDemandReference[id]) return\n            if(mode === 'bank'){\n                amountDemandReference[id]--\n                return bankAmountAllowed++\n            }\n            amountDemandReference[id]--\n        }))\n        x=-w/2 + 40\n\n        const getResourceLeft = ()=>amountGivenReference.map((e,i)=>model[`${resourceReference[i]}Amount`] - e)\n        const numberOfResourceLeft = addNumberLine(getResourceLeft().map(a=>`(${a})`),x)\n        \n        const proposeTradeLetterHead = this.tradingElement.addShape({kind:'text',text:'Propose Trade To:',x:-w/2 + 150,y:h/2 - 200,font:'30px Times News Roman'})\n        const proposerElement = this.tradingElement.addShape({kind:'text',text:'',x:-w/2 + 100,y:h/2-160,font:'25px Times News Roman',display:false})\n\n        const updateNumbers = ()=>{\n            numberOfResourceDemand.forEach((e,i)=>e.text = amountDemandReference[i])\n            numberOfResourceGiven.forEach((e,i)=>e.text = amountGivenReference[i])\n            const resourceLeft = getResourceLeft().map(a=>`(${a})`)\n            numberOfResourceLeft.forEach((e,i)=>e.text = resourceLeft[i])\n            this.tradingElement.updateVisual()\n        }\n\n        const usernamesElement = [1,2,3].map((e,i)=>{\n            const elem = this.tradingElement.addShape({kind:'text',text:'',x:-w/2 + 100,y:h/2-160+i*40,font:'25px Times News Roman'})\n            elem.x = -w/2 + elem.w/2 + 30\n            return elem\n        })\n\n        const addCheck = (y,id)=>{\n            const check = this.tradingElement.addShape({kind:'arc',color:'red',border:true,rad:10,borderWidth:10,borderColor:'brown',x:-20,y})\n            let username\n            check.pressedEvent(()=>{\n                if(check.borderOnly) proposeTo.splice(id,0,username)\n                if(!check.borderOnly){\n                    username = proposeTo[id]\n                    proposeTo.splice(id,1)\n                }\n                check.borderOnly = !check.borderOnly;\n                this.tradingElement.updateVisual()\n            })\n            return check\n        }\n        const checkElement = []\n        for(let i = 0;i<3;i++){\n            checkElement.push(addCheck(h/2 - 160 + i*40,i))\n        }\n\n        const bank = this.tradingElement.addShape({\n            kind:'text',text:'Trade with Bank',font:'30px Times News Roman',\n            y:h/2 - 200,x:20\n        })\n        bank.x = bank.w/2 + 20\n        addYellowHoverEvent(bank)\n        bank.pressedEvent(()=>{\n            if(mode==='send') changeMode('bank')\n            else changeMode('send')\n        })\n\n        const propose = this.tradingElement.addShape({\n            kind:'text',text:'Propose Trade',y:h/2-140,font:'30px Times News Roman'\n        })\n        const cancel = this.tradingElement.addShape({\n            kind:'text',text:'Cancel Trade',y:h/2-80,font:'30px Times News Roman'\n        })\n        propose.x = propose.w/2 + 20\n        cancel.x = cancel.w/2 + 20\n        addYellowHoverEvent(propose)\n        addYellowHoverEvent(cancel)\n        const acceptSymbol = this.tradingElement.addShape({kind:'img',spriteLink:'assets/tickIcon.png',drawWidth:40,x:w/2-80,y:h/2-137})\n        const cancelSymbolBottom = this.tradingElement.addShape({kind:'img',spriteLink:'assets/crossIcon.png',drawWidth:40,x:w/2-80,y:h/2-75})\n        const cancelSymbolTop = this.tradingElement.addShape({kind:'img',spriteLink:'assets/crossIcon.png',drawWidth:40,x:-w/2+40,y:-h/2+40})\n        \n        const doneFunctionFactory = (func)=>()=>{\n            console.log('pass1')\n            if(amountGivenReference.reduce((t,e)=>t+e,0) === 0 && amountDemandReference.reduce((t,e)=>t+e,0)===0) return false\n            console.log('pass2')\n            if(mode === 'send' && proposeTo.length === 0) return false\n            console.log('pass3')\n            this.tradingElement.display = false\n            onTrade = false\n            if(mode === 'receive'){\n                queue.splice(0,1)\n                if(queue.length >0){\n                    onTrade = true\n                    this.tradeReceiver()\n                    this.tradingElement.display = true\n                }\n            }\n            else if(queue.length >0){\n                changeMode('receive')\n            }\n            func()\n        }\n\n        const rejectFunctionFactory = (func)=>()=>{\n            this.tradingElement.display = false\n            onTrade = false\n            if(mode === 'receive'){\n                queue.splice(0,1)\n                if(queue.length >0){\n                    onTrade = true\n                    this.tradeReceiver()\n                    this.tradingElement.display = true\n                }\n            }\n            else if(queue.length >0){\n                changeMode('receive')\n            }\n            func()\n        }\n\n        const proposeTradeFunction = ()=>{\n            const result = doneFunctionFactory(()=>{})()\n            if(result === false) return\n            if(mode === 'receive'){\n                proposeTrade([receiveMode,mode,amountGivenReference,amountDemandReference,proposer])\n            }\n            else if(mode === 'send'){\n                proposeTrade([mode,amountGivenReference,amountDemandReference,proposeTo])\n            }\n            else if (mode === 'bank'){\n                proposeTrade([mode,amountGivenReference,amountDemandReference])\n            }\n        }\n\n        cancel.pressedEvent(()=>rejectFunctionFactory(cancelTrade)())\n        cancelSymbolBottom.pressedEvent(()=>rejectFunctionFactory(cancelTrade)())\n        cancelSymbolTop.pressedEvent(()=>rejectFunctionFactory(cancelTrade)())\n\n        acceptSymbol.pressedEvent(()=>proposeTradeFunction())\n        propose.pressedEvent(()=>proposeTradeFunction())\n\n        const initiateReceiveMode = ()=>{\n            deiniateBankMode()\n            deinitiateSendMode()\n            proposerElement.display = true\n            proposeTradeLetterHead.text = 'Proposed By:'\n            this.tradingElement.updateVisual()\n        }\n\n        const deiniateReceiveMode = ()=>{\n            proposeTradeLetterHead.text = 'Proposed To:'\n            propose.text = 'Propose Trade'\n            proposerElement.display = false\n        }\n\n        const initiateSendMode = ()=>{\n            deiniateReceiveMode()\n            deiniateBankMode()\n            bank.display = true\n            checkElement.forEach(e=>e.display = false)\n            usernamesElement.forEach(e=>e.display = false)\n            usernames.filter(e=>e!==usernames[model.playerid]).forEach((e,i)=>{\n                checkElement[i].display = true\n                usernamesElement[i].text = e\n                usernamesElement[i].x = -w/2 + usernamesElement[i].w/2 + 30\n                usernamesElement[i].display = true\n            })\n            this.tradingElement.updateVisual()\n        }\n\n        const deinitiateSendMode = ()=>{\n            checkElement.forEach(s=>s.display = false)\n            usernamesElement.forEach(s=>s.display= false)\n            bank.display = false\n        }\n\n        const initiateBankMode = ()=>{\n            deiniateReceiveMode()\n            deinitiateSendMode()\n            proposeTradeLetterHead.display = false\n            bank.display = true\n            bank.text = 'Trade with Players'\n            this.tradingElement.updateVisual()\n        }\n\n        const deiniateBankMode = ()=>{\n            bank.display = false\n            proposeTradeLetterHead.display = true\n            bank.text = 'Trade with Bank'\n            this.tradingElement.updateVisual()\n        }\n\n        const changeMode = (m)=>{\n            mode = m\n            this.tradingElement.display = true\n            onTrade = true\n            if(mode === 'receive'){\n                receiveMode = 'Accept'\n                this.updateTradeReceiver()\n                initiateReceiveMode()\n            }\n            if(mode === 'send'){\n                amountGivenReference = [0,0,0,0,0]\n                amountDemandReference = [0,0,0,0,0]\n                proposeTo = [...usernames].filter(e=>e!==usernames[model.playerid])\n                checkElement.forEach(e=>e.borderOnly = false)\n                initiateSendMode()\n            }\n            if(mode === 'bank'){\n                amountGivenReference = [0,0,0,0,0]\n                amountDemandReference = [0,0,0,0,0]\n                bankAmountAllowed = 0\n                initiateBankMode()\n            }\n            updateNumbers()\n        }\n\n        this.updateTradeReceiver = ()=>{\n            let [proposing,resourceDemanded,resourceGiven] = queue[0]\n            //2 cases, failed trade and possible trade\n            for(let i = 0;i<resourceDemanded.length;i++){\n                let left = model[resourceReference[i]+'Amount']\n                if(left < resourceDemanded[i]){\n                    //Trade failed\n                    queue.splice(0,1)\n                    if(queue.length > 0) this.updateTradeReceiver()\n                    else{\n                        onTrade = false\n                        this.tradingElement.display = false\n                    }\n                    return\n                }\n            }\n\n            amountGivenReference = resourceDemanded\n            amountDemandReference = resourceGiven\n            proposer = proposing\n            propose.text = 'Accept Trade'\n            proposerElement.text = usernames[proposing]\n            updateNumbers()\n        }\n\n        this.receiveTrade = (...args)=>{\n            queue.push([...args])\n            if(!onTrade){\n                changeMode('receive')\n            }\n            return new Promise((resolve,reject)=>{\n                proposeTrade = resolve\n                cancelTrade = reject\n            })\n        }\n\n        this.initiateTrade = ()=>{\n            if(onTrade) return\n            else return new Promise((resolve,reject)=>{\n                proposeTrade = resolve\n                cancelTrade = reject\n                changeMode('send')\n                updateNumbers()\n                this.tradingElement.display = true\n            })\n        }\n    }\n\n    drawAnnouncement(){\n        let animationDuration = 500\n\n        this.announcementQueue = []\n        this.announcmentPerpetual = []\n        this.onAnnouncementPerpetual = false\n        this.onAnnoucementChanged = false\n        \n        //Format: [text,color,time/perpetual,started]\n        this.announcement = this.app.addObject({x:this.app.canvas.width/2,y:80,positionIndicator:false})\n        this.annoucementText = this.announcement.addShape({kind:'text',font:'70px Times News Roman',color:'orange',text:'',display:false})\n        this.announcement.addShape({kind:'roundedRectangle',w:this.app.canvas.width/2,h:200,display:false})\n        const fadeOut = (func)=>this.annoucementText.addAnimation('opacity',0,animationDuration,()=>{this.annoucementText.display=false;if(func) func()})\n        const fadeIn = (funcDone)=>this.annoucementText.addAnimation('opacity',1,animationDuration,funcDone)\n        const fadeOutThenFadeIn = (func,funcDone)=> fadeOut(()=>{func();this.annoucementText.display = true; fadeIn(funcDone)})\n\n        this.updateAnnouncement = ()=>{\n            if(this.announcementQueue.length > 0 && !this.announcementQueue[0][3]){\n                let [text,color,time] = this.announcementQueue[0]\n                fadeOutThenFadeIn(()=>{\n                    this.annoucementText.text = text\n                    this.annoucementText.color = color\n                    setTimeout(()=>{this.announcementQueue.splice(0,1);this.updateAnnouncement();},time+animationDuration)\n                })\n                this.announcementQueue[0][3] = true\n            }\n            else if(this.announcementQueue.length >0) return\n            else if(!this.onAnnouncementPerpetual && this.annoucementText.display) return fadeOut()\n            else if(this.onAnnouncementPerpetual && ((!this.annoucementText.display) || this.onAnnoucementChanged)) return fadeOutThenFadeIn(()=>{\n                let [text,color] = this.announcmentPerpetual\n                this.annoucementText.text = text\n                this.annoucementText.color = color\n            })\n        }\n    }\n\n    changeAnnoucementPerpetual(text,color){\n        this.announcmentPerpetual = [text,color]\n        this.onAnnoucementChanged = true\n        this.updateAnnouncement()\n    }\n\n    addToAnnoucementQueue(text,color,time){\n        this.announcementQueue.push([text,color,time,false])\n        this.updateAnnouncement()\n    }\n\n    drawPossibleSettlement(position){\n        const [x,y] = this.findPositionOfIntersection(position)\n        const shape = this.structureElement.addShape({\n        kind:'poly',x,y,color:'white',points:[\n            [15,-10.5],[0,-25.5],[-15,-10.5],[-15,10.5],[15,10.5]\n        ],border:true,borderColor:'black',borderWidth:2,opacity:0.5,\n        })\n        return shape\n    }\n\n    selectRoadLocation(roads){\n        return new Promise(r=>{\n            const locations = roads.map(location=>{\n                const loc = this.drawPossibleRoad(location[0],location[1])\n                loc.pressedEvent(()=>{\n                    console.log('hello',r)\n                    r(location)\n                    locations.forEach(e=>e.kill())\n                })\n                return loc\n            })\n        })\n    }\n\n    drawPossibleRoad(topHead,bottomHead){\n        let [x1,y1] = this.findPositionOfIntersection(topHead)\n        let [x2,y2] = this.findPositionOfIntersection(bottomHead)\n        const angle1 = degToRad(findAngle2Point(x1,y1,x2,y2))\n        const angle2 = degToRad(findAngle2Point(x2,y2,x1,y1))\n        const changeDistance=7\n        x1+= Math.cos(angle1)*changeDistance\n        y1-= Math.sin(angle1)*changeDistance\n        x2+= Math.cos(angle2)*changeDistance\n        y2-= Math.sin(angle2)*changeDistance\n\n        const shape = this.roadElement.addShape({\n            kind:'line',\n            lineWidth:9,\n            points:[[x1,y1],[x2,y2]],\n            color:'white',\n            border:true,\n            borderWidth:3,\n            borderColor:'black'\n        })\n        return shape\n    }\n\n    createLeaderboardObject(model,initiateTrade=()=>{}){\n        const w = 300\n        const h = 320\n        this.leaderBoardObject = this.app.addObject({x:this.app.canvas.width - 300,y:370})\n        \n        const leaderBoardCanvas = document.createElement('canvas')\n        \n        const leaderBoardApp = new lght.app(leaderBoardCanvas,{constantRender:false,background:'pink'})\n        leaderBoardApp.backgroundColor = 'pink'\n        leaderBoardApp.canvas.width = w\n        leaderBoardApp.canvas.height = h\n        const obj = leaderBoardApp.addObject({x:leaderBoardCanvas.width/2,y:0})\n\n        const createShape = (y,color,textColor)=>{\n            obj.addShape({w,h:80,kind:'rect',y,color})\n            const usernameShape = obj.addShape({y:y-20,color:'black',font:'bold italic 25px Times News Roman',text:'',kind:'text'})\n            const infoShape = obj.addShape({y:y+10,color:'black',font:'20px Times News Roman',text:'',kind:'text'})\n            const specialNote = obj.addShape({y:y+28,font:'10px Times News Roman',color:'black',kind:'text',text:''})\n            return [usernameShape,infoShape,specialNote]\n        }\n        const [us1,is1,sn1] = createShape(40,'#00FFFF','black')\n        const [us2,is2,sn2] = createShape(120,'#EA3C53','black')\n        const [us3,is3,sn3] = createShape(200,'white','black')\n        const [us4,is4,sn4] = createShape(280,'#FF7F50','black')\n\n        this.usernameElements = [us1,us2,us3,us4]\n        this.infoElements = [is1,is2,is3,is4]\n        this.specialNoteElements = [sn1,sn2,sn3,sn4]\n\n        this.updateLeaderBoard = ()=>{\n            let {usernames,resourcePlayers,devCardPlayers,vpPlayers,longestRoadPlayer,largestArmyPlayer} = model\n            this.specialNoteElements.forEach(e=>e.text = '')\n            usernames.forEach((u,i)=>{\n                if(this.usernameElements[i].text !== u) this.usernameElements[i].text = u\n                this.infoElements[i].text = `${vpPlayers[i]} ${resourcePlayers[i]} ${devCardPlayers[i]} Development Cards`\n                if(longestRoadPlayer === i && largestArmyPlayer === i) this.specialNoteElements[i].text = 'Longest Road and Largest Army'\n                else if(longestRoadPlayer === i) this.specialNoteElements[i].text = 'Longest Road'\n                else if(largestArmyPlayer === i) this.specialNoteElements[i].text = 'Largest Army'\n            })\n            obj.updateVisual()\n            leaderBoardApp.turnFunctions(leaderBoardApp)\n            this.leaderBoardObject.updateVisual()\n        }\n        this.updateLeaderBoard()\n\n\n        //Color data #003aa7 blue #ce2b10 red #e19500 orange\n        const rectangle = this.leaderBoardObject.addShape({kind:'roundedRectangle',w,h,borderRadius:20,color:'white',clip:true,clipCanvas:leaderBoardApp.canvas,border:true,borderWidth:5,borderColor:'black',shadow:{blur:7,offsetX:4,color:'black'}})\n        \n        const turnIndicator = this.leaderBoardObject.addShape({kind:'poly',specialPolygon:true,radius:20,numberOfSide:3,rotation:180,color:'#ffffa1',x:w/2 + 40, y:-h/2+40})\n        \n        const tradeIndicatorObject = this.app.addObject({x:this.app.canvas.width - 300,y:370,display:false,opacity:0})\n        tradeIndicatorObject.addShape({kind:'roundedRectangle',w:w+20,h:100,borderRadius:10,borderColor:'black',border:true,color:'white'})\n        tradeIndicatorObject.addShape({kind:'text',font:'25px Times News Roman',text:'Click to initiate trade'})\n        this.leaderBoardObject.hoverEvent(()=>{\n        tradeIndicatorObject.display = true\n        tradeIndicatorObject.addAnimation('opacity',1,500)\n        },()=>{\n        tradeIndicatorObject.addAnimation('opacity',0,500,()=>tradeIndicatorObject.display = false)\n        })\n        this.leaderBoardObject.pressedEvent(()=>initiateTrade())\n\n        let loop = 0\n        const fadeIn = ()=>{\n            loop --\n            if(loop)turnIndicator.addAnimation('opacity',1,500,fadeOut)\n            else turnIndicator.addAnimation('opacity',1,500)\n        }\n        const fadeOut = ()=>{\n            turnIndicator.addAnimation('opacity',0,500,fadeIn)\n        }\n\n        const hRect = h/4\n        const turnOriginal = -h/2+40\n\n        this.updateTurn = (turn)=>{\n            turnIndicator.addAnimation('y',turnOriginal+turn*hRect,1000,()=>{\n                loop = 5\n                fadeIn()\n            })\n        }\n        this.leaderBoardObject.updateVisual()\n    }\n\n    createActionObject(){\n        this.actionObject = this.app.addObject({\n            y:this.app.canvas.height/2 +130,\n            x:this.app.canvas.width - 300,\n            display:false\n        })\n        this.actionObject.addShape({kind:'roundedRectangle',w:320,h:400,borderRadius:20,color:'white',border:true,borderColor:'black',borderWidth:5,shadow:{blur:4,offsetX:4,color:'black'}})\n        this.actionObject.addShape({kind:'text',y:-150,font:'35px Times News Roman',text:'Take Action:',color:'black'})\n        const addActionObject = (y,text)=>{\n            const line = this.actionObject.addShape({kind:'line',y,color:'yellow',lineWidth:40,points:[[-150,0],[-150,0]],display:false})\n            const textElement = this.actionObject.addShape({kind:'text',y,font:'30px Times News Roman',text,color:'gray',display:false})\n            textElement.hoverEvent(\n                ()=>{\n                    line.display = true\n                    line.addAnimation('points.1.0',150,500)\n                },\n                ()=>{\n                    line.addAnimation('points.1.0',-150,500,()=>{\n                    line.display = false\n                })\n                }\n            )\n            textElement.line = line\n            return textElement\n        }\n        let actionReference = ['road','settlement','city','trade','turn','dice']\n        let actionDisplayReference = ['Build Road ','Build Settlement ','Build City ','Initiate Trade ','Pass turn ','Roll Dice ']\n        let textObjects = [\n            addActionObject(-90,''),\n            addActionObject(-40,''),\n            addActionObject(10,''),\n            addActionObject(60,''),\n            addActionObject(110,''),\n            addActionObject(160,''),\n        ]\n        textObjects.forEach((e,id)=>{\n            e.pressedEvent(()=>this.actionFunctions[id]())\n        })\n        this.currentActions = []\n        this.actionFunctions = []\n        this.updateActionObjects = ()=>{\n            if(textObjects.length === 0) return this.actionObject.display = false\n            this.actionObject.display = true\n            textObjects.forEach((e,i)=>{\n                if(this.currentActions[i]){\n                    e.display = true\n                    e.text = actionDisplayReference[actionReference.indexOf(this.currentActions[i])]\n                }\n                else e.display = false\n                e.line.points = [[-150,0],[-150,0]]\n            })\n            this.actionObject.updateVisual()\n        }\n    }\n\n    changePlayerResourceCount({wheatAmount,rockAmount,sheepAmount,brickAmount,woodAmount}){\n        let changeResource = (object,number,num)=>{\n            number.text=num\n            object.updateVisual()\n        }\n        if(wheatAmount !== undefined) changeResource(...this.wheatCard,wheatAmount)\n        if(rockAmount !== undefined) changeResource(...this.rockCard,rockAmount)\n        if(sheepAmount !== undefined) changeResource(...this.sheepCard,sheepAmount)\n        if(brickAmount !== undefined) changeResource(...this.brickCard,brickAmount)\n        if(woodAmount !== undefined) changeResource(...this.woodCard,woodAmount)\n    }\n\n    createPlayerDeck(){\n        this.playerUI = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height-(100)})\n        this.playerDeck = this.playerUI.addShape({w:this.app.canvas.width,h:250,color:'brown',kind:'rect'})\n        this.wheatCard = this.addCard(200,'assets/wheatResource.png',-1)\n        this.rockCard = this.addCard(300,'assets/rockResource.png',-1)\n        this.sheepCard = this.addCard(400,'assets/sheepResource.png',-1)\n        this.brickCard = this.addCard(500,'assets/brickResource.png',-1)\n        this.woodCard = this.addCard(600,'assets/woodResource.png',-1)\n    }\n\n    addRobber(x,y){\n        this.robberElement.x = this.robberElement.x + x\n        this.robberElement.y = this.robberElement.y + y\n        return this.robberElement.addShape({kind:'img',spriteLink:\"assets/robber.png\",y:-20,drawWidth:40})\n    }\n\n    addLayer(num){\n        const arr = []\n        if(!num) return this.app.addObject({x:this.app.canvas.width/2 - 270,y:this.app.canvas.height/2 - 50})\n        else{\n        for(let i = 0;i<num;i++){\n            arr.push(this.app.addObject({x:this.app.canvas.width/2 + 200,y:this.app.canvas.height/2 - 50}))\n            return arr\n        }\n        }\n    }\n\n    createDevDeck(){\n        const createDevLayer = ()=>{\n        const layer = this.addLayer()\n        layer.x += 500\n        layer.y -= 250\n        return layer\n        }\n\n        this.devDeck = createDevLayer()\n        this.devDeck.addShape({kind:'roundedRectangle',x:4,h:200,w:137.84,color:'white',borderRadius:15,border:true,borderColor:'black',borderWidth:5,shadow:{blur:4,color:'black',offsetX:3}})\n        this.devDeck.addShape({kind:'roundedRectangle',h:200,w:137.84,clip:true,clipImageLink:'assets/developmentCardBack.png',color:'white',borderRadius:15,border:true,borderColor:'black',borderWidth:5})\n        \n        this.popUpDevDeckRectangle = createDevLayer()\n        this.popUpDevDeckRectangle.opacity = 0\n        this.popUpDevDeckRectangle.display = false\n\n        this.popUpDevDeckRectangle.addShape({kind:'roundedRectangle',h:100,w:160,color:'white',borderRadius:10,border:true,borderWidth:5,borderColor:'black'})\n        this.popUpDevDeckRectangle.addShape({kind:'text',font:'16px Times New Roman',text:'Buy Development Card',y:-30})\n        this.popUpDevDeckRectangle.addShape({kind:'text',font:'35px Times New Roman',text:'  '})\n        this.popUpDevDeckRectangle.addShape({kind:'text',font:'20px Times New Roman',text:'5 left',y:30})\n\n        this.devDeck.hoverEvent(()=>{\n            this.popUpDevDeckRectangle.display = true\n            this.popUpDevDeckRectangle.addAnimation(\"opacity\",1,500)\n        },()=>{\n            this.popUpDevDeckRectangle.addAnimation(\"opacity\",0,500,()=>{\n            this.popUpDevDeckRectangle.display = false\n            })\n        })\n\n        this.animateDevCard = this.devDeck.addShape({kind:'roundedRectangle',h:200,w:137.84,clip:true,clipImageLink:'assets/developmentCardBack.png',color:'white',borderRadius:15,border:true,borderColor:'black',borderWidth:5,display:false})\n    }\n\n    createDevDeckPlayer(model,delegate){\n        const developmentCardReference = ['Monopoly','Knight','Road','Point','Plenty']\n        const imageReference = ['assets/monopolyCard.png','assets/knightCard.png','assets/roadCard.png','assets/libraryCard.png','assets/yearOfPlentyCard.png']\n        const cardElements = imageReference.map((link,id)=>{\n            let card = this.addCard(0,link) //[card,number]\n            card[0].display = false\n            card[0].pressedEvent(()=>delegate[developmentCardReference[id]]())\n            return card\n        })\n        this.playerUI.updateVisual()\n        let spacing = 150\n        let leftMargin = 100\n        let xs = []\n        for(let i = 0;i<imageReference.length;i++){\n            console.log(cardElements[0][0])\n            xs.push(this.app.canvas.width - leftMargin - 0.5*cardElements[0][0].shapes[0].width - spacing*i)\n        }\n        let currentCardPosition = []\n        let oldModel = {...model.myDevCards}\n\n        this.updateToModel = ()=>{\n            //3 scenario, just changing the number, adding a new kind of card, and \n            //removing a card\n            let cards = model.myDevCards\n            for(let property in oldModel){\n                if(!cards[property]){\n                    let card = cardElements[developmentCardReference.indexOf(property)]\n                    card[0].display = false\n                    currentCardPosition.splice(currentCardPosition.indexOf(property),1)\n                    currentCardPosition.forEach((e,i)=>{\n                        let card = cardElements[developmentCardReference.indexOf(e)]\n                        let x= xs[i]\n                        card[0].addAnimation('x',x,1000)\n                    })\n                }\n                else if(cards[property] !== oldModel[property]){\n                    console.log(property)\n                    cardElements[developmentCardReference.indexOf(property)][1].text = cards[property]\n                    cardElements[developmentCardReference.indexOf(property)][0].updateVisual()\n                }\n\n            }\n            console.log('done1')\n            for(let property in cards){\n                if(!oldModel[property] && cards[property]){\n                    let index = currentCardPosition.length\n                    currentCardPosition.push(property)\n                    let card = cardElements[developmentCardReference.indexOf(property)]\n                    console.log(card)\n                    card[0].display = true\n                    card[0].zIndex = index\n                    card[0].y = this.app.canvas.height + 200\n                    card[0].x = xs[index]\n                    card[1].text = cards[property]\n                    console.log(index,xs)\n                    card[0].addAnimation('y',this.app.canvas.height-70,500)\n                }\n            }\n            console.log('done2')\n            this.playerUI.updateVisual()\n            oldModel = {...model.myDevCards}\n        }\n        \n    }  \n\n    inititiateArray(...args){\n        [...args].forEach(name=>this[name] = [])\n    }\n\n    createBoard(){\n\n        this.backgroundPoly = this.background.addShape({\n            kind:'poly',\n            radius:460,\n            numberOfSide:6,\n            specialPolygon:true,\n            color:'#006994',\n            clip:true,\n            clipImageLink:'assets/background.png',\n        })\n\n        const clipImageLinks = [\"assets/rockTile.png\",\"assets/desertTile.png\",\"assets/woodTile.png\",\"assets/wheatTile.png\",\"assets/sheepTile.png\",\"assets/brickTile.png\"]\n        const imageResourceReference = ['Rock','Desert','Wood','Wheat','Sheep','Brick']\n        //Adding the tile, the number, and the dots\n        const repeatedlyAddByPositionMatrix = (array,func)=>this.positionMatrix.forEach((row,posY)=>{\n        if(Array.isArray(array)) array.forEach(arr=>this[arr].push([]))\n        else this[array].push([])\n        row.forEach(([x,y],posX)=>{\n            const elements = func(x,y,posY,posX)\n            if(!elements) return\n            if(Array.isArray(elements)) elements.forEach((e,index)=>this[array[index]][posY].push = (e))\n            else this[array][posY].push(elements)\n        })\n        })\n\n        repeatedlyAddByPositionMatrix('hexMap',(x,y,posY,posX)=>{\n            const image = clipImageLinks[imageResourceReference.indexOf(this.resourceBoard[posY+1][posX+1])]\n            return this.resourceElement.addShape({...this.hexProperty,x:x,y:y,clip:true,clipImageLink:image})\n        })\n\n        let checkPositionFactory = (func)=>(x,y,posY,posX)=>(this.numberBoard[posY+1][posX+1])?func(x,y,posY,posX):null\n\n        repeatedlyAddByPositionMatrix('buttonMap',checkPositionFactory((x,y)=>this.resourceElement.addShape({x,y,kind:'arc',rad:30,color:'#e8d79b'})))\n        repeatedlyAddByPositionMatrix(['numberMap','dotMap'],checkPositionFactory((x,y,posY,posX)=>this.addNumberTokenToPositionWithNumber(this.numberBoard[posY+1][posX+1],[x,y])))\n\n        //Adding the ports\n        const positionReference = [[70, -364],[-212, -356],[-350, -130],[-360, 118],[-208, 356],[70, 350],[272, 230],[402, -24],[262, -256]]\n        const tradeImageReference = [\"assets/rockTrade.png\",\"assets/wheatTrade.png\",\"assets/randomTrade.png\",'assets/woodTrade.png','assets/brickTrade.png','assets/sheepTrade.png']\n        const tradeResourceReference = ['Rock trade', 'Wheat trade','Random trade','Wood trade','Brick trade','Sheep trade']\n        const boardPosReference = [[0,2],[0,0],[2,0],[4,0],[6,0],[6,2],[5,4],[3,6],[1,4]]\n        positionReference.forEach(([x,y],index)=>{\n            let [py,px] = boardPosReference[index]\n            let trade = this.resourceBoard[py][px]\n            const port = this.portElement.addShape({kind:'img',spriteLink:tradeImageReference[tradeResourceReference.indexOf(trade)],x,y,drawWidth:65})\n            port.hoverEvent(()=>port.addAnimation('drawWidth',130,600)\n            ,()=>port.addAnimation('drawWidth',65,600))\n            this.portMap.push(port)\n        })\n\n    }\n\n    getPositionMatrix(){\n        const hex = this.resourceElement.addShape({...this.hexProperty,display:false})\n        const hexWidth = hex.width-2\n        const hexHeight = hex.height-2\n        const sideLength = hex.sideLength\n        //the width have to be exactly 60\n\n        let y = 0\n        const fiveRow = [[-2*hexWidth,0],[-hexWidth,0],[0,0],[hexWidth,0],[2*hexWidth,0]]\n        y = 0.5*hexHeight + 0.5*sideLength\n        const fourRowDown = [[-1.5*hexWidth,y],[-hexWidth/2,y],[0.5*hexWidth,y],[1.5*hexWidth,y]]\n        const threeRowDown = [[-hexWidth,2*y],[0,2*y],[hexWidth,2*y]]\n        y = -y\n        const fourRowUp = [[-1.5*hexWidth,y],[-hexWidth/2,y],[0.5*hexWidth,y],[1.5*hexWidth,y]]\n        const threeRowUp = [[-hexWidth,2*y],[0,2*y],[hexWidth,2*y]]\n        this.positionMatrix = [threeRowUp,fourRowUp,fiveRow,fourRowDown,threeRowDown]\n\n        hex.kill()\n    }\n\n    addCard(x,clipImage,leftOrRight=1){\n        const cardHeight = 350;\n        const cardWidth = 249.2\n        const cardProps = {\n        kind:'roundedRectangle',\n        h:cardHeight,w:cardWidth,borderRadius:10,\n        borderColor:'yellow',borderWidth:10,\n        }\n        const numberCircleProps = {\n        kind:'arc',\n        rad:30, y:-cardHeight/2,x:leftOrRight*cardWidth/2,color:'black',\n        opacity:0.4\n        }\n        const numberProp = {\n        kind:'text',\n        y:-cardHeight/2-5,x:leftOrRight*cardWidth/2,color:'white',\n        font:'40px Times News Roman',\n        text:0\n        }\n\n        const card1 = this.app.addObject({x,y:this.app.canvas.height-70})\n        const card = card1.addShape({...cardProps,clip:true,clipImageLink:clipImage})\n        const circle = card1.addShape({...numberCircleProps})\n        const number = card1.addShape({...numberProp})\n        \n        card1.hoverEvent(()=>{\n        card1.addAnimation('y',this.app.canvas.height-200,500)\n        card.border = true\n        circle.addAnimation('opacity',0,500)\n        number.addAnimation('opacity',0,500)\n        },()=>{\n        card1.addAnimation('y',this.app.canvas.height-70,500)\n        circle.addAnimation('opacity',1,500)\n        number.addAnimation('opacity',1,500)\n        card.border = false\n        })\n        return [card1,number]\n    }\n\n    createDiceDeck(){\n        const diceProps = {kind:'roundedRectangle',w:75,h:75,borderRadius:15,borde:true,borderWidth:5,borderColor:'black'}\n        this.dicePlate = this.diceElement.addShape({kind:'roundedRectangle',w:350,h:150,borderRadius:40,color:'#e20000',border:true,borderWidth:10,borderColor:'black'})\n        this.redDice = this.diceElement.addShape({...diceProps,color:'red',x:50})\n        this.yellowDice = this.diceElement.addShape({...diceProps,color:'yellow',x:-50})\n        this.diceElement.display = false\n\n        const diceNumReference = [[1,1],[2,1],[1,3],[3,2],[3,3],[5,2],[5,3],[6,3],[5,5],[6,5],[6,6]]\n        this.rollDiceAnimation = (number)=>{\n            return new Promise(r=>{\n                const [pip1,pip2] = diceNumReference[number-2]\n                const numberOfQuickLoop = 20\n                const timeBetweenLoop = 70\n                this.diceElement.display = true\n                let loopleft = numberOfQuickLoop\n\n                const loopManage = ()=>{\n                    loopleft--\n                    if(loopleft>0){\n                        this.showDiceNumber(random(1,6),random(1,6))\n                        setTimeout(loopManage,timeBetweenLoop)\n                    }\n                    else{\n                        this.showDiceNumber(pip1,pip2)\n                        setTimeout(()=>{\n                            this.diceElement.display = false\n                            r()\n                        },2000)\n                    }\n                }\n\n                setTimeout(loopManage,timeBetweenLoop)\n            })\n        }\n    }\n\n    showDiceNumber(dice1,dice2){\n        const renderNumber = (dice,number,pipColor)=>{\n            if(dice.pips){\n                dice.pips.forEach(pip=>pip.kill())\n            }\n            dice.pips = []\n            const distance = 20\n            const positionReference = [[[0,0]],[[-distance,distance],[distance,-distance]],[[-distance,distance],[0,0],[distance,-distance]],[[-distance,distance],[distance,-distance],[-distance,-distance],[distance,distance]],[[-distance,distance],[distance,-distance],[-distance,-distance],[distance,distance],[0,0]],[[-distance,distance],[distance,-distance],[-distance,-distance],[distance,distance],[distance,0],[-distance,0]]]\n            const position = positionReference[number-1]\n            position.forEach(([x,y])=>{\n                const pip = this.diceElement.addShape({kind:'arc',color:pipColor,rad:8,x:dice.x+x,y:dice.y+y})\n                dice.pips.push(pip)\n            })\n        }\n        renderNumber(this.redDice,dice1,'yellow')\n        renderNumber(this.yellowDice,dice2,'red')\n    }\n\n    addNumberTokenToPositionWithNumber(number,[x,y]){\n        const numberReference = [2,3,4,5,6,7,8,9,10,11,12]\n        const dotReference = [1,2,3,4,5,6,5,4,3,2,1]\n        const dots = []\n        const num = this.resourceElement.addShape({x,y:y-10,kind:'text',text:`${number}`,color:(number===6||number===8)?'red':'black',font:'36px Times New Roman'})\n        \n        const numberOfDot = dotReference[numberReference.indexOf(number)]\n        const spaceBetweenDot = 5\n        const startingPosition = x - ((numberOfDot*spaceBetweenDot/2))+1.5\n        for(let i = 0;i<numberOfDot;i++){\n            dots.push(this.resourceElement.addShape({y:y+14,x:startingPosition+spaceBetweenDot*i,kind:'arc',rad:2,color:(number===6||number===8)?'red':'black'}))\n        }\n        return [num,dots]\n    }\n\n    activateCitySelection(){\n        return new Promise(r=>this.cityResolveFunction = r)\n    }\n\n    buildSettlement(position,color=this.currentColorCode){\n        const [x,y] = this.findPositionOfIntersection(position)\n        const shape = this.structureElement.addShape({\n        kind:'poly',x,y,color,points:[\n            [10,-7],[0,-17],[-10,-7],[-10,7],[10,7]\n        ],border:true,borderColor:'black',borderWidth:6,\n        shadow:{\n        blur:2,\n        offsetX:1,\n        color:'black'\n        }})\n        this.settlements.push(shape)\n        this.structures.push(shape)\n        shape.pressedEvent(()=>{\n            if(this.cityResolveFunction){\n                this.cityResolveFunction(position)\n                this.cityResolveFunction = null\n            }\n        })\n        return shape\n    }\n\n    buildCity(position,color=this.currentColorCode){\n        const [x,y] = this.findPositionOfIntersection(position)\n        const oldSettlement = this.structures.find((structure)=>Math.round(structure.x)===Math.round(x)&&Math.round(structure.y)===Math.round(y))\n        console.log(oldSettlement)\n        oldSettlement.kill()\n        this.structures = this.structures.filter((structure)=>Math.round(structure.x)!==Math.round(x)&&Math.round(structure.y)!==Math.round(y))\n        this.settlements = this.settlements.filter((structure)=>Math.round(structure.x)!==Math.round(x)&&Math.round(structure.y)!==Math.round(y))\n\n        const shape = this.structureElement.addShape({\n        kind:'poly',x,y,color,points:[\n            [8,-7],[0,-17],[-8,-7],[-8,17],[25,17],[25,2],[8,2]\n        ],border:true,borderColor:'black',borderWidth:6,\n        shadow:{\n        blur:2,\n        offsetX:1,\n        color:'black'\n        }})\n        this.settlements.push(shape)\n        this.cities.push(shape)\n        return shape\n    }\n\n    buildRoad(topHead,bottomHead,color=this.currentColorCode){\n        let [x1,y1] = this.findPositionOfIntersection(topHead)\n        let [x2,y2] = this.findPositionOfIntersection(bottomHead)\n        const angle1 = degToRad(findAngle2Point(x1,y1,x2,y2))\n        const angle2 = degToRad(findAngle2Point(x2,y2,x1,y1))\n        const changeDistance=7\n        x1+= Math.cos(angle1)*changeDistance\n        y1-= Math.sin(angle1)*changeDistance\n        x2+= Math.cos(angle2)*changeDistance\n        y2-= Math.sin(angle2)*changeDistance\n\n        const shape = this.roadElement.addShape({\n        kind:'line',\n        lineWidth:6,\n        points:[[x1,y1],[x2,y2]],\n        color,\n        border:true,\n        borderWidth:3,\n        borderColor:'black'\n        ,shadow:{\n            blur:7,color:'black',offsetX:3,\n        }})\n        this.roads.push(shape)\n        return shape\n    }\n\n    findPositionOfIntersection(position){\n        const translatedPosition = this.translateToViewCoordinate(...position.flat())\n        const [y1,x1,y2,x2,y3,x3] = translatedPosition\n        let oddsOneOut,differentCoefficient\n        if(y1===y2){\n        oddsOneOut = [y3,x3]\n        differentCoefficient = y3-y2\n        }\n        else if(y1===y3){\n        oddsOneOut = [y2,x2]\n        differentCoefficient = y2-y1\n        }\n        else{\n        oddsOneOut = [y1,x1]\n        differentCoefficient = y1-y2\n        }\n\n        const [oddY,oddX] = oddsOneOut\n        if(oddY < 0 || oddY >= this.hexMap.length || oddX<0 || oddX>=this.hexMap[oddY].length){\n            const tileRow = [[y1,x1],[y2,x2],[y3,x3]].filter(([y,x])=>!(y===oddY&&x===oddX)).sort(([y1,x1],[y2,x2])=>x1-x2)\n            const leftMostHex = this.hexMap[tileRow[0][0]][tileRow[0][1]]\n            const rightMostHex = this.hexMap[tileRow[1][0]][tileRow[1][1]]\n            const [vx,vy] = (leftMostHex)?(leftMostHex.findVertex()[(differentCoefficient>0)?4:5]):(rightMostHex.findVertex()[(differentCoefficient>0?2:1)])\n            return this.resourceElement.findThePositionThatIsRelativeToThisObjectFromAbsolutePosition(vx,vy)\n        }\n\n        const oddsHex = this.hexMap[oddY][oddX]\n        return this.resourceElement.findThePositionThatIsRelativeToThisObjectFromAbsolutePosition(...oddsHex.findVertex()[(differentCoefficient>0)?0:3])\n    }\n\n    translateToViewCoordinate(){\n        const result = []\n        for (const pos of arguments) {\n        result.push(pos-1)\n        }\n        return result\n    }\n\n    doThisActionOnAllHex(func){\n        this.hexMap.forEach((row,y)=>row.forEach((b,x)=>func(b,x,y)))\n    }\n\n    doThisActionOnAllButton(func){\n        this.buttonMap.forEach((row,y)=>row.forEach((b,x)=>func(b,x,y)))\n    }\n\n    doThisActionOnAllNumber (func) {\n        this.numberMap.forEach((row,y)=>row.forEach((b,x)=>func(b,x,y)))\n    }\n    }\n\nexport default View","import _ from 'lodash'\nconst compareDoubleArray = ([x1,y1],[x2,y2])=>x1===x2 && y1===y2\n\nconst comparePositions = (p1,p2)=>{\n    let position1 = [...p1]\n    let position2 = [...p2]\n    for(let p of position2){\n        let found = false\n        for(let i = 0;i<position1.length;i++){\n            if(compareDoubleArray(position1[i],p)){\n                found = true\n                position1.splice(i,1)\n                break\n            }\n        }\n        if(!found) return false\n    }\n    return true\n}\nconst isThereThisPositionInThisArray = (position,array)=>{\n    for(let p of array){\n        if(comparePositions(position,p)) return true\n    }\n    return false\n}\n\nclass Model{\n    constructor(){\n        this.allGridLocation = [\n            [0,0,1,0,1,1],[0,0,1,1,0,1],[0,1,1,1,1,2],[0,1,1,2,0,2],[0,2,1,2,1,3],[0,2,0,3,1,3],[0,3,1,3,1,4],\n            [1,0,2,0,2,1],[1,0,2,1,1,1],[1,1,2,1,2,2],[1,1,2,2,1,2],[1,2,2,3,1,3],[1,2,2,2,2,3],[1,3,2,3,2,4],[1,3,1,4,2,4],[1,4,2,4,2,5],\n            [2,0,3,0,3,1],[2,0,3,1,2,1],[2,1,3,1,3,2],[2,1,2,2,3,2],[2,2,3,2,3,3],[2,2,3,3,2,3],[2,3,3,3,3,4],[2,3,3,4,2,4],[2,4,3,4,3,5],[2,4,2,5,3,5],[2,5,3,5,3,6],\n            [3,0,4,0,3,1],[3,1,4,0,4,1],[3,1,4,1,3,2],[3,2,4,2,3,3],[3,2,4,1,4,2],[3,3,4,2,4,3],[3,3,3,4,4,3],[3,4,4,3,4,4],[3,4,3,5,4,4],[3,5,4,4,4,5],[3,5,3,6,4,5],\n            [4,0,5,0,4,1],[4,1,5,0,5,1],[4,1,4,2,5,1],[4,2,5,1,5,2],[4,2,5,2,4,3],[4,3,5,2,5,3],[4,3,4,4,5,3],[4,4,5,3,5,4],[4,4,4,5,5,4],\n            [5,0,5,1,6,0],[5,1,6,0,6,1],[5,1,5,2,6,1],[5,2,6,1,6,2],[5,2,6,2,5,3],[5,3,6,2,6,3],[5,3,5,4,6,3]\n        ].map(e=>_.chunk(e,2))\n    }\n\n    loadData({grid,playerUsernames}){\n        this.grid = grid\n        this.usernames = playerUsernames\n        this.vpPlayers = this.usernames.map(e=>0)\n        this.resourcePlayers = this.usernames.map(e=>0)\n        this.devCardPlayers = this.usernames.map(e=>0)\n        this.settlements = this.usernames.map(e=>[])\n        this.cities = this.usernames.map(e=>[])\n        this.roads = this.usernames.map(e=>[])\n        this.myDevCards = {}\n        this.wheatAmount = 0\n        this.sheepAmount = 0\n        this.rockAmount = 0\n        this.brickAmount = 0\n        this.woodAmount = 0\n        this.tradingPriveleges = {}\n        this.playerid = playerUsernames.length-1\n        this.longestRoadPlayer = -1\n        this.largestArmyPlayer = -1\n    }\n\n    updateLeaderBoard(){\n        let totalDevCard = 0\n        for(let card in this.myDevCards) totalDevCard += this.myDevCards[card]\n        this.devCardPlayers[this.playerid] = totalDevCard\n        let totalResource = this.wheatAmount + this.sheepAmount + this.rockAmount+this.woodAmount+this.brickAmount\n        this.resourcePlayers[this.playerid] = totalResource\n        this.vpPlayers = this.vpPlayers.map((e,i)=>{\n            let point = this.settlements[i].length + this.cities[i].length*2\n            if(this.longestRoadPlayer === i) point += 2\n            if(this.largestArmyPlayer === i) point += 2\n            return point\n        })\n    }\n\n    get canBuildCity(){\n        if(this.rockAmount<3 && this.wheatAmount<2) return false\n        if(this.selfSettlement.length === 0) return false\n        if(this.selfCity.length === 4) return false\n        return true\n    }\n\n    get canBuildSettlement(){\n        if(!(this.wheatAmount && this.sheepAmount && this.woodAmount && this.brickAmount)) return false\n        if(this.selfSettlement.length >= 5) return false\n        if(this.possibleSettlements.length === 0) return false\n        return true\n    }\n\n    get canBuildRoad(){\n        if(!(this.brickAmount && this.woodAmount)) return false\n        if(this.selfRoad.length >= 14) return false\n        if(this.possibleRoads.length === 0) return false\n        return true\n    }\n\n    get possibleActions(){\n        const result = []\n        if(this.canBuildCity) result.push('city')\n        if(this.canBuildSettlement) result.push('settlement')\n        if(this.canBuildRoad) result.push('road')\n        return result\n    }\n\n    newPlayer({username}){\n        this.usernames.push(username)\n        this.vpPlayers.push(0)\n        this.resourcePlayers.push(0)\n        this.devCardPlayers.push(0)\n        this.settlements.push([])\n        this.cities.push([])\n        this.roads.push([])\n        \n    }\n\n    findAdjacentPositionsTo(position){\n        //The idea behind this function is this:\n        //What ever the intersection is, it is always in the shape of either a MickeyMouse face or a spaceship\n        //The idea behind this function is this: find the surrounding tile to make it a bigger MickeyMouse face/spaceship\n        //To do that, we find the odds on out and the tile row. Odds one out has a different y value then the 2 on the tile row\n        //After than, add 1 and decrease 1 to the odds one out to find the other 2 tiles\n        //Finally, use the tile row to find the tile bordering both of them. Note that we have to adjust the length to fit the different length of the \n        //rows\n        const inBound = ([y,x])=>(y<this.grid.resourceBoard.length && y>=0 && x>=0 && x<this.grid.resourceBoard[y].length)\n\n        const [[firstY],[secondY],[thirdY]] = position\n        const oddsOneOut = (firstY === secondY) ? position[2] : ((secondY===thirdY)? position[0]:position[1])\n        const tileRow = position.filter(tile=>tile!==oddsOneOut)\n        tileRow.sort(([y1,x1],[y2,x2])=>x1-x2)\n        const positionTypeCoefficient = oddsOneOut[0] - tileRow[0][0] \n        const [oddsY,oddsX] = oddsOneOut\n        const leftOddsBorderTile = [oddsY,oddsX - 1]\n        const rightOddsBorderTile = [oddsY,oddsX + 1]\n        const result = []\n        if(inBound(leftOddsBorderTile)) result.push([oddsOneOut,tileRow[0],leftOddsBorderTile])\n        if(inBound(rightOddsBorderTile)) result.push([oddsOneOut,tileRow[1],rightOddsBorderTile])\n\n        const yOfTileRowBorderTile = tileRow[0][0] - positionTypeCoefficient\n        if(yOfTileRowBorderTile >= 0 && yOfTileRowBorderTile < this.grid.resourceBoard.length){\n            const differenceInLength = this.grid.resourceBoard[tileRow[0][0]].length -  this.grid.resourceBoard[yOfTileRowBorderTile].length\n            const tileRowBorderTile = [yOfTileRowBorderTile,tileRow[0][1] + ((differenceInLength < 0)?1:0)]\n            if(inBound(tileRowBorderTile)) result.push([tileRowBorderTile,...tileRow])\n        }\n        \n        return result\n    }\n\n    compareRoad([topHead1,bottomHead1],[topHead2,bottomHead2]){\n        return (comparePositions(topHead1,topHead2) && comparePositions(bottomHead1,bottomHead2))||(comparePositions(topHead1,bottomHead2) && comparePositions(bottomHead1,topHead2))\n    }\n\n    doesThisRoadAlreadyExist(road){\n        for(let s of this.roads){\n            for(let r of s){\n                if(this.compareRoad(road,r)) return true\n            }\n        }\n        return false\n    }\n\n    buyDevCard(card){\n        this.myDevCards[card] = (this.myDevCards[card])?this.myDevCards[card]+1:1\n    }\n\n    get possibleRoads(){\n        const result = []\n        const alreadyChecked = []\n        const notAlreadyChecked = head =>{\n            for(let h of alreadyChecked){\n                if(comparePositions(h,head)) return false\n            }\n            return true\n        }\n\n        this.selfRoad.forEach(([topHead,bottomHead])=>{\n            if(notAlreadyChecked(topHead)){\n                const adjacent = this.findAdjacentPositionsTo(topHead)\n                adjacent.forEach(position=>{\n                    if(!this.doesThisRoadAlreadyExist([topHead,position])) result.push([topHead,position])\n                })\n                alreadyChecked.push(topHead)\n            }\n            if(notAlreadyChecked(bottomHead)){\n                const adjacent = this.findAdjacentPositionsTo(bottomHead)\n                adjacent.forEach(position=>{\n                    if(!this.doesThisRoadAlreadyExist([bottomHead,position])) result.push([bottomHead,position])\n                })\n                alreadyChecked.push(bottomHead)\n            }\n        })\n        return result\n    }\n\n    validPlaceToBuildAStructure(position){\n        let adjacents = this.findAdjacentPositionsTo(position)\n        for(let s of this.settlements){\n            if(isThereThisPositionInThisArray(position,s)) return false\n            for(let position of adjacents){\n                if(isThereThisPositionInThisArray(position,s)) return false\n            }\n        }\n        for(let s of this.cities){\n            if(isThereThisPositionInThisArray(position,s)) return false\n            for(let position of adjacents){\n                if(isThereThisPositionInThisArray(position,s)) return false\n            }\n        }\n        return true\n    }\n\n    get possibleSettlementsInitial(){\n        console.log(this.allGridLocation)\n        return this.allGridLocation.filter((e)=>this.validPlaceToBuildAStructure(e))\n    }\n\n    get possibleSettlements(){\n        const heads = [...this.selfRoad].flat(1)\n        //Removing extraneous heads\n        const headsFiltered = []\n        for(let h of heads){\n            if(!headsFiltered.includes(h)) headsFiltered.push(h)\n        }\n        return headsFiltered.filter((e)=>this.validPlaceToBuildAStructure(e))\n    }\n\n    possibleRoadsInitial(settlement){\n        const adjacents =  this.findAdjacentPositionsTo(settlement)\n        const result = []\n        adjacents.forEach(head=>{if(!this.doesThisRoadAlreadyExist([settlement,head])) result.push([settlement,head])})\n        return result\n    }\n\n    get selfSettlement(){\n        return this.settlements[this.playerid]\n    }\n\n    get selfRoad(){\n        return this.roads[this.playerid]\n    }\n\n    get selfCity(){\n        return this.cities[this.playerid]\n    }\n\n    get selfUsername(){\n        return this.usernames[this.playerid]\n    }\n\n    selfBuildRoad(road){\n        this.selfRoad.push(road)\n    }\n\n    buildRoad(road,id){\n        this.roads[id].push(road)\n    }\n\n    selfBuildSettlement(settlement){\n        settlement.forEach(([y,x])=>{\n            switch(this.grid.resourceBoard[y][x]){\n                case 'Random trade':\n                    this.tradingPriveleges.randomTrade = true\n                    break\n                case 'Wood trade':\n                    this.tradingPriveleges.woodTrade = true\n                    break\n                case 'Sheep trade':\n                    this.tradingPriveleges.sheepTrade = true\n                    break\n                case 'Brick trade':\n                    this.tradingPriveleges.brickTrade = true\n                    break\n                case 'Rock trade':\n                    this.tradingPriveleges.rockTrade = true\n                    break\n                case 'Wheat trade':\n                    this.tradingPriveleges.wheatTrade = true\n                    break;\n                default:\n                    break;\n            }\n        })\n        this.selfSettlement.push(settlement)\n    }\n\n    addResourceInitial(resource){\n        let possibles = ['Wheat','Rock','Sheep','Brick','Wood']\n        let allResources = [...resource].filter(e=>possibles.includes(e))\n        allResources.forEach(e=>this[`${e.toLowerCase()}Amount`]++)\n    }\n\n    buildSettlement(settlement,id){\n        this.settlements[id].push(settlement)\n    }\n\n    selfBuildCity(city){\n        this.settlements[this.playerid] = this.settlements[this.playerid].filter(e=>!comparePositions(e,city))\n        this.cities[this.playerid].push(city)        \n    }\n\n    buildCity(city,id){\n        this.settlements[id] = this.settlements[id].filter(e=>!comparePositions(city,e))\n        this.cities[id].push(city)\n    }\n\n    changeRobberPostion(y,x){\n        this.grid.robberPosition = [y,x]\n    }\n\n    whoHaveCityOnThisHex(y,x){\n\n    }\n\n    get selfCanBuyDevelopmentCard(){\n        return (this.wheatAmount && this.rockAmount && this.sheepAmount)\n    }\n\n    useDevelopmentCard(card){\n        this.myDevCards[card]--\n    }\n\n    findWhoToStealFrom(position){\n        const result = []\n        BigLoop:for(let i = 0;i<this.usernames.length;i++){\n            if(i===this.playerid) continue\n            for(let x = 0;x<this.settlements[i].length;x++){\n                let house = this.settlements[i][x]\n                if(house[0] === position || house[1] === position || house[2] === position){\n                    result.push(i)\n                    continue BigLoop;\n                }\n            }\n        }\n        return result\n    }\n\n    addResource(resource){\n        for(let prop in resource){\n            this[`${prop.toLowerCase()}Amount`]+=resource[prop]\n        }\n    }\n\n    minusResource(resource){\n        for(let prop in resource){\n            this[`${prop.toLowerCase()}Amount`]-=resource[prop]\n        }\n    }\n    \n    changeResourceMonopoly(change,resource,playerindex){\n        for(let index = 0;index<change.length;index++){\n            if(index === playerindex){\n                this.resourcePlayers[index] += change[index]\n                if(playerindex === this.playerid) this.playerid[`${resource.toLowerCase}Amount`] += change[index]\n            }\n            else{\n                this.resourcePlayers[index] -= change[index]\n            }\n        }\n    }\n}\n\nexport default Model","import View from '../View/view'\nimport Model from '../Model/model'\nimport axios from 'axios'\nimport io from 'socket.io-client'\n\n//actions:settlement,city,road,dice,turn,trade\nconst Controller = async (canvas,token)=>{\n    const socket = io.connect('/',{query:{token}})\n    socket.emit('Request game data')\n    socket.emit('Request new player')\n\n    const sendMessage = (message,data)=>{\n        console.log(message,data)\n        socket.emit(message,data)\n    }\n\n    const messageReference = ['Trade with Bank','Trade Response','Trade Refuse','Trade Acceptance','Trade Initiation','Waiting for Choose Road location','Road location chosen','Choose Road location','Waiting for Choose Knight location','Waiting for Discard Cards','Discard Cards','Monopoly resource chosen','Use development card','Choose Monopoly resources','Monopoly resource chosen','Cheat Done','Cheat','Build Settlement Initial','Build Road Initial','Build road','Build settlements','Build city','Your development card','Cheat Done','Error','Start turn timer','Cancel turn timer','Game starting','Action Needed','Move Knight','Resource Stolen','New player','Game data','Dice Result','Plenty card chosen','Change in extra condition','Waiting for Choose Settlement Resources','Waiting for Build Settlement Initial','Waiting for Build Road Initial']\n    const usualFunctionReference = messageReference.map(e=>()=>{})\n    const waitingFunctionReference = messageReference.map(e=>[])\n    const errorFunctionReference = messageReference.map(e=>[])\n    const resourceReference = ['wheat','rock','sheep','wood','brick']\n    const translateToApplicableResources = (resources)=>{\n        const result = {}\n        resources.forEach((e,i)=>result[resourceReference[i]] = e)\n        return result\n    }\n\n    const addMessage = (mess,func,addOnce)=>{\n        if(messageReference.indexOf(mess) === -1) return\n        usualFunctionReference[messageReference.indexOf(mess)] = func\n    }\n\n    const awaitResponse = (message)=>{\n        return new Promise((resolve,rejected)=>{\n            waitingFunctionReference[messageReference.indexOf(message)].push(resolve)\n            errorFunctionReference[messageReference.indexOf(message)].push(rejected)\n        })\n    }\n\n    const messageReceived = async (message,data)=>{\n        console.log(message,data)\n        const index = messageReference.indexOf(message)\n        await usualFunctionReference[index](data)\n        waitingFunctionReference[index].forEach(f=>f(data))\n        waitingFunctionReference[index] = []\n        errorFunctionReference[index] = []\n    }\n\n    const updateLeaderBoard = ()=>{\n        model.updateLeaderBoard()\n        view.updateLeaderBoard()\n    }\n\n    messageReference.forEach(m=>socket.on(m,(data)=>messageReceived(m,data)))\n\n    const global = {\n        turnSpecificInfo:{},\n        startRobberDrag:()=>{},\n        phase:0\n    }\n    let view = new View(canvas)\n    let model = new Model()\n\n    let playerCode = ['blue','red','white','orange','black']\n    let announce = (message,code)=>{\n        view.onAnnouncementPerpetual = true\n        view.changeAnnoucementPerpetual(message,playerCode[code])\n    }\n    let quickAnnounce = (message,code=global.turn)=>{\n        view.addToAnnoucementQueue(message,playerCode[code],1000)\n    }\n    let turnOffAnnouncement = ()=>{\n        view.onAnnouncementPerpetual = false\n        view.updateAnnouncement()\n    }\n\n    view.configureColorCode(playerCode,global)\n\n    addMessage('Error',({error})=>{\n        announce(error)\n        console.log(error)\n        errorFunctionReference.forEach((e,i)=>{\n            if(e.length>0){\n                for(let f of e){f(error)}\n            }\n            errorFunctionReference[i] = []\n            waitingFunctionReference[i] = []\n        })\n    })\n\n    addMessage('Game data',({gameData})=>{\n        const data = gameData\n        announce(`Room Code: ${data.roomCode}`)\n        model.loadData(data)\n        view.receiveData(data)\n        view.createLeaderboardObject(model,initiateTrade)\n        view.createTradingObject(model.usernames,model)\n        view.configureStealInterface(model)\n        view.createDevDeckPlayer(model,devCardDelegate)\n        \n        let currentX = view.robberElement.x\n        let currentY = view.robberElement.y\n\n        const moveBack = (func)=>{\n            let duration = 500\n            view.robberElement.addAnimation('x',currentX,duration,func)\n            view.robberElement.addAnimation('y',currentY,duration)\n        }\n        let resolve = ()=>{}\n        let ry = 0\n        let rx = 0\n\n        view.robberElement.makeDraggable(null,()=>{\n            let position;\n            let hex;\n            BigLoop:for(let y = 0;y<view.hexMap.length;y++){\n                for(let x = 0;x<view.hexMap[y].length;x++){\n                    if(y+1 === ry && x+1===rx) continue\n                    if(view.hexMap[y][x].pointInShape(view.robberElement.x,view.robberElement.y)){\n                        position = [y,x]\n                        hex = view.hexMap[y][x]\n                        resolve([y+1,x+1])\n                        break BigLoop\n                    }\n                }\n            }\n            if(!position) moveBack()\n            else{\n                view.robberElement.addAnimation('x',hex.absoluteX,500)\n                view.robberElement.addAnimation('y',hex.absoluteY,500)\n                view.robberElement.draggable = false\n            }\n        })\n        view.robberElement.draggable = false\n        global.startRobberDrag = ()=>{\n            currentX = view.robberElement.x\n            currentY = view.robberElement.y\n            ry = model.grid.robberPosition[0]\n            rx = model.grid.robberPosition[1]\n            view.robberElement.draggable = true\n            return new Promise((r)=>{\n                resolve = r\n            })\n        }\n        if(!model.playerid) view.initiateStartGameMessage(()=>sendMessage('Start game'))\n    },true)\n\n    addMessage('New player',(data)=>{\n        console.log(data)\n        model.newPlayer(data)\n        updateLeaderBoard()\n    },true)\n\n    addMessage('Game starting',async ()=>{\n        view.turnOffStartGameMessage()\n        announce('The game is starting')\n        await awaitResponse('Waiting for Build Settlement Initial')\n        announce('Please choose where to put your settlement:')\n        const firstSettlementLocation = await view.selectSettlementLocationFrom(model.possibleSettlementsInitial)\n        view.buildSettlement(firstSettlementLocation,playerCode[model.playerid])\n        model.selfBuildSettlement(firstSettlementLocation)\n        sendMessage('Build Settlement Initial',{position:firstSettlementLocation})\n        let {resource} = await awaitResponse('Build Settlement Initial')\n        model.addResourceInitial(resource)\n        await awaitResponse('Waiting for Build Road Initial')\n        announce(\"Please choose where to put your road:\")\n        const firstRoadLocation = await view.selectRoadLocation(model.possibleRoadsInitial(firstSettlementLocation))\n        view.buildRoad(firstRoadLocation[0],firstRoadLocation[1],playerCode[model.playerid])\n        model.selfBuildRoad(firstRoadLocation)\n        sendMessage('Build Road Initial',{roadPosition:firstRoadLocation,settlementPosition:firstSettlementLocation})\n        await awaitResponse('Build Road Initial')\n        await awaitResponse('Waiting for Build Settlement Initial')\n        announce(\"Please choose where to put your settlement:\")\n        const secondSettlementLocation = await view.selectSettlementLocationFrom(model.possibleSettlementsInitial)\n        view.buildSettlement(secondSettlementLocation,playerCode[model.playerid])\n        model.selfBuildSettlement(secondSettlementLocation)\n        sendMessage('Build Settlement Initial',{position:secondSettlementLocation})\n        let result = await awaitResponse('Build Settlement Initial')\n        resource = result.resource\n        model.addResourceInitial(resource)\n        await awaitResponse('Waiting for Build Road Initial')\n        announce('Please choose where to put your road:')\n        const secondRoadLocation = await view.selectRoadLocation(model.possibleRoadsInitial(secondSettlementLocation))\n        view.buildRoad(...secondRoadLocation,playerCode[model.playerid])\n        model.selfBuildRoad(secondRoadLocation)\n        sendMessage('Build Road Initial',{roadPosition:secondRoadLocation,settlementPosition:secondSettlementLocation})\n        await awaitResponse('Build Road Initial')\n        turnOffAnnouncement()\n    },true)\n\n    const changeToPhaseOne = ()=>{\n        global.phase = 1\n        view.currentActions = ['dice','trade']\n        view.actionFunctions = view.currentActions.map(e=>actionFunctions[e])\n        view.updateActionObjects()\n    }\n\n    const changeToPhaseTwo = ()=>{\n        global.phase = 2\n        view.currentActions = ['trade',...model.possibleActions,'turn']\n        view.actionFunctions = view.currentActions.map(e=>actionFunctions[e])\n        view.updateActionObjects()\n    }\n\n    const changeToWaitingPhase = ()=>{\n        global.phase = 3\n        view.currentActions = []\n        view.actionFunctions = []\n        view.updateActionObjects()\n    }\n\n    const actionFunctionFactory = (func)=>async (data)=>{\n        changeToWaitingPhase()\n        try{\n            await func(data)\n            view.changePlayerResourceCount(model)\n            updateLeaderBoard()\n        }catch(e){\n            console.log(e)\n        }\n    }\n\n    const phase1ActionFunctionFactory = (func)=>async (data)=>{\n        await actionFunctionFactory(func)(data)\n        changeToPhaseOne()\n    }\n    const phase2ActionFunctionFactory = (func)=>async (data)=>{\n        await actionFunctionFactory(func)(data)\n        changeToPhaseTwo()\n    }\n\n    const handleRobber = async ()=>{\n        await awaitResponse('Waiting for Choose Knight location')\n        announce('Please choose robber location:')\n        const position = await global.startRobberDrag()\n        model.changeRobberPostion(...position)\n        sendMessage('Choose Knight location',position)\n        const robabble = model.findWhoToStealFrom(position)\n        await awaitResponse('Move Knight')\n        if(robabble.length){\n            announce('Who do you want to steal from?')\n            const id = await view.initiateStealFromOther(robabble,robabble.map(e=>playerCode[e]))\n            sendMessage('Choose who to steal from',id)\n            const {resource,robbed} = await awaitResponse('Resource Stolen')\n            model[resource] += 1\n            model.resourcePlayers[robbed]--\n        }\n        turnOffAnnouncement()\n    }\n\n    addMessage('Discard Cards',async ({resource,id})=>{\n        const totalResource = resource.wheat + resource.sheep + resource.rock + resource.brick + resource.wood\n        if(id === model.playerid){\n            model.minusResource(resource)\n        }\n        else{\n            model.resourcePlayers[id] -= totalResource\n        }\n    })\n\n    addMessage('Dice Result',async ({dice,resource})=>{\n        announce(`${model.usernames[global.turn]} rolled ${dice}`,global.turn)\n        await view.rollDiceAnimation(dice)\n        if(dice !== 7){\n            const myResource = resource[model.playerid]\n            myResource.forEach(([resource,amount])=>{\n                model[`${resource.toLowerCase()}Amount`]+=amount\n            })\n            view.changePlayerResourceCount(model)\n            turnOffAnnouncement()\n        }\n        else{\n            const totalResources = model.wheatAmount + model.sheepAmount + model.rockAmount + model.brickAmount + model.woodAmount\n            if(totalResources > 7){\n                announce(\"You have more than 7 cards!\",model.playerid)\n                let resource = await view.initiateSteal(Math.ceil(totalResources/2))\n                resource = translateToApplicableResources(resource)\n                sendMessage('Discard Cards',{resource})\n            }\n            await handleRobber()\n        }\n        turnOffAnnouncement()\n    })\n\n    const actionFunctions = {\n        dice:actionFunctionFactory(async ()=>{\n            sendMessage('Roll Dice')\n            await awaitResponse('Dice Result')\n            changeToPhaseTwo()\n        }),\n        trade:()=>{initiateTrade()},\n        settlement:phase2ActionFunctionFactory(async ()=>{\n            announce(\"Settlement where?\")\n            const location = await view.selectSettlementLocationFrom(model.possibleSettlements)\n            turnOffAnnouncement()\n            sendMessage('Build settlements',{position:location})\n            await awaitResponse('Build settlements')\n            view.buildSettlement(location)\n            model.selfBuildSettlement(location)\n            model.sheepAmount --\n            model.wheatAmount --\n            model.brickAmount --\n            model.woodAmount --\n            view.changePlayerResourceCount(model)\n        }),\n        city:phase2ActionFunctionFactory(async ()=>{\n            announce(\"Click on a settlement to upgrade:\")\n            const location = await view.activateCitySelection()\n            turnOffAnnouncement()\n            sendMessage('Build city',{position:location})\n            await awaitResponse('Build city')\n            view.buildCity(location)\n            model.selfBuildCity(location)\n            model.rockAmount -= 3\n            model.wheatAmount -= 2\n            view.changePlayerResourceCount(model)\n        }),\n        road:phase2ActionFunctionFactory(async ()=>{\n            announce(\"Road where?\")\n            const location = await view.selectRoadLocation(model.possibleRoads)\n            turnOffAnnouncement()\n            sendMessage('Build road',{position:location})\n            await awaitResponse('Build road')\n            console.log(location)\n            view.buildRoad(location[0],location[1])\n            model.selfBuildRoad(location)\n            model.brickAmount --\n            model.woodAmount --\n            view.changePlayerResourceCount(model)\n        }),\n        turn:()=>{\n            sendMessage('Pass Turn')\n            changeToWaitingPhase()\n        }\n    }\n\n    addMessage('Action Needed',({turn})=>{\n        view.changePlayerResourceCount(model)\n        updateLeaderBoard()\n        global.turnSpecificInfo = {}\n        if(turn === model.playerid){\n            changeToPhaseOne()\n        }\n        else{\n            changeToWaitingPhase()\n            announce(`${model.usernames[turn]} is playing his turn.`,playerCode[turn])\n        }\n        global.turn = turn\n        view.updateTurn(turn)\n    })\n    \n    const devCardFunctionFactory = (message,func)=>async ()=>{\n        console.log('playing dev card',message,func)\n        if(global.turnSpecificInfo.playedDevelopmentCard) return\n        global.turnSpecificInfo.playedDevelopmentCard = true\n        const previousPhase = global.phase\n        if(global.phase === 3) return\n        changeToWaitingPhase()\n        try{\n            await func(previousPhase)\n            view.changePlayerResourceCount(model)\n            updateLeaderBoard()\n        }\n        catch(e){\n            console.log(e)\n        }\n        console.log('hello')\n        console.log(previousPhase)\n        if(previousPhase===1) changeToPhaseOne()\n        else changeToPhaseTwo()\n    }\n\n    const phase2DevCardFunctionFactory = (message,func)=>devCardFunctionFactory(message,async (previousPhase)=>{\n        if(previousPhase !== 2) throw Error()\n        sendMessage('Use development card',{card:message})\n        await awaitResponse('Use development card')\n        model.useDevelopmentCard(message)\n        view.updateToModel()\n        await func()\n    })\n\n    const devCardDelegate = {\n        Knight:devCardFunctionFactory('Knight',async ()=>{\n            sendMessage('Use development card',{card:'Knight'})\n            await awaitResponse('Use development card')\n            model.useDevelopmentCard('Knight')\n            view.updateToModel()\n            await handleRobber()\n        }),\n        Point:()=>{},\n        Plenty:phase2DevCardFunctionFactory('Plenty',async()=>{\n            let resource = await view.initiatePlenty()\n            resource = translateToApplicableResources(resource)\n            sendMessage('Choose Plenty resources',resource)\n            console.log('hello')\n            await awaitResponse('Plenty card chosen')\n            console.log('hello1')\n            model.addResource(resource)\n            console.log(resource)\n            view.changePlayerResourceCount(model)\n        }),\n        Monopoly:phase2DevCardFunctionFactory('Monopoly',async()=>{\n            let resource = await view.initiateMonpolyResourceChoosing()\n            sendMessage('Choose Monopoly resources',resource)\n            let {change} = await awaitResponse('Monopoly resource chosen')\n            console.log(change)\n            model.changeResourceMonopoly(change,resource,model.playerid)\n            view.changePlayerResourceCount(model)\n        }),\n        Road:phase2DevCardFunctionFactory('Road',async()=>{\n            await awaitResponse('Waiting for Choose Road location')\n            if(model.selfRoad.length>=13) return\n            const firstPosition = await view.selectRoadLocation(model.possibleRoads)\n            console.log(firstPosition)\n            view.buildRoad(...firstPosition)\n            model.buildRoad(firstPosition,model.playerid)\n            const secondPosition = await view.selectRoadLocation(model.possibleRoads)\n            view.buildRoad(...secondPosition)\n            model.buildRoad(secondPosition,model.playerid)\n            sendMessage('Choose Road location',{positions:[firstPosition,secondPosition]})\n            await awaitResponse('Road location chosen')\n        })\n    }\n\n    let alreadyBuying = false\n\n    view.devDeck.pressedEvent(async ()=>{\n        if(alreadyBuying) return\n        if(!model.selfCanBuyDevelopmentCard) return\n        if(model.playerid === global.turn && !global.turnSpecificInfo.boughtDevelopmentCard){\n            alreadyBuying = true\n            global.turnSpecificInfo.boughtDevelopmentCard = true\n            sendMessage('Buy development card')\n            const {card} = await awaitResponse('Your development card')\n            model.buyDevCard(card)\n            view.animateDevCardToPlayerDeck()\n            view.updateToModel()\n            model.wheatAmount--\n            model.sheepAmount--\n            model.rockAmount--\n            view.changePlayerResourceCount(model)\n            alreadyBuying = false\n        }\n    })\n\n    //Passive info\n    addMessage('Change in extra condition',({armyChange,roadChange})=>{\n        if(armyChange) model.largestArmyPlayer = armyChange\n        if(roadChange) model.longestRoadPlayer = roadChange\n        updateLeaderBoard()\n    })\n    \n    const passiveFunctionFactory = (func)=>async (...args)=>{\n        if(global.turn === model.playerid) return\n        await func(...args)\n        updateLeaderBoard()\n    }\n\n    const attachPassiveFunctionFactory = (message,func)=>addMessage(message,passiveFunctionFactory(func))\n\n    attachPassiveFunctionFactory('Build settlements',({position})=>{\n        model.buildSettlement(position,global.turn)\n        view.buildSettlement(position,playerCode[global.turn])\n        model.resourcePlayers[global.turn]-=4\n        quickAnnounce(`${model.usernames[global.turn]} is building a settlement`)\n    })\n    attachPassiveFunctionFactory('Build city',({position})=>{\n        model.buildCity(position,global.turn)\n        view.buildCity(position,playerCode[global.turn])\n        model.resourcePlayers[global.turn]-=5\n        quickAnnounce(`${model.usernames[global.turn]} is building a city`)\n    })\n    attachPassiveFunctionFactory('Build road',({position})=>{\n        model.buildRoad(position,global.turn)\n        view.buildRoad(...position,playerCode[global.turn])\n        model.resourcePlayers[global.turn]-=2\n        quickAnnounce(`${model.usernames[global.turn]} is building a road`)\n    })\n    attachPassiveFunctionFactory('Use development card',({card})=>{\n        quickAnnounce(`${model.usernames[global.turn]} is playing a ${card} development card`)\n        model.devCardPlayers[global.turn]--\n    })\n    attachPassiveFunctionFactory('Buy development card',()=>{\n        quickAnnounce(`${model.usernames[global.turn]} is buying a development card`)\n        model.devCardPlayers[global.turn]++\n    })\n    attachPassiveFunctionFactory('Move Knight',({position})=>{\n        model.grid.robberPosition = position\n        view.moveRobber(position)\n    })\n    attachPassiveFunctionFactory('Resource Stolen',({resource,robbed})=>{\n        //resource is full wheatAmount/rockAmount\n        if(robbed === model.playerid) model[resource]++\n        else{\n            model.resourcePlayers[robbed]--\n            model.resourcePlayers[global.turn]++\n        }\n    })\n    attachPassiveFunctionFactory('Plenty card chosen',()=>{\n        model.resourcePlayers[global.turn]+=2\n    })\n    attachPassiveFunctionFactory('Build Settlement Initial',({position,resource,turn})=>{\n        model.resourcePlayers[turn]+=resource.length\n        model.buildSettlement(position,turn)\n        view.buildSettlement(position,playerCode[turn])\n        quickAnnounce(`${model.usernames[turn]} built a settlement`,playerCode[turn])\n    })\n    attachPassiveFunctionFactory('Build Road Initial',({roadPosition,turn})=>{\n        model.buildRoad(roadPosition,turn)\n        view.buildRoad(...roadPosition,playerCode[turn])\n        quickAnnounce(`${model.usernames[turn]} built a road`,playerCode[turn])\n    })\n    attachPassiveFunctionFactory('Monopoly resource chosen',({resource,change})=>{\n        model.changeResourceMonopoly(change,resource,global.turn)\n        quickAnnounce(`${model.usernames[global.turn]} steal everyones ${resource.toLowerCase()}!`)\n    })\n    attachPassiveFunctionFactory('Road location chosen',({positions})=>{\n        model.buildRoad(positions[0],global.turn)\n        model.buildRoad(positions[1],global.turn)\n        view.buildRoad(...positions[0],playerCode[global.turn])\n        setTimeout(()=>{\n            view.buildRoad(...positions[1],playerCode[global.turn])\n        },1000)\n    })\n\n    addMessage('End game',({winner})=>{\n        announce(`${model.usernames[winner]} had won the game!`)\n    })\n\n    const myTradingCodes = []\n    const myTradingPartner = []\n\n    const getRidOfCode = (code)=>{\n        let index = myTradingCodes.indexOf(code)\n        myTradingCodes.splice(index,1)\n        myTradingPartner.splice(index,1)\n    }\n    const initiateTrade = async ()=>{\n        try{\n            console.log('ehllo')\n            let [mode,amountGiven,amountDemand,proposeTo] = await view.initiateTrade()\n            console.log(mode,amountGiven,amountDemand,proposeTo)\n            amountGiven = translateToApplicableResources(amountGiven)\n            amountDemand = translateToApplicableResources(amountDemand)\n            if(mode === 'bank'){\n                sendMessage('Trade with Bank',{resource:[amountGiven,amountDemand]})\n                await awaitResponse('Trade with Bank')\n                model.addResource(amountDemand)\n                model.minusResource(amountGiven)\n            }else{\n                sendMessage('Trade Initiation',{resources:[amountGiven,amountDemand],players:proposeTo.map(e=>model.usernames.indexOf(e))})\n                const {codes,players} = await awaitResponse('Trade Initiation')\n                codes.forEach(c=>myTradingCodes.push(c))\n                players.forEach(p=>myTradingPartner.push(p))\n            }\n        } catch(e){\n\n        }\n    }\n    const translateToArray = ({wheat,rock,sheep,wood,brick})=>[wheat,rock,sheep,wood,brick]\n\n    const handleTrade = async (user,resourceDemand,resourceGiven,code)=>{\n        try{\n            let [receiveMode,mode,given,demand] = await view.receiveTrade(user,translateToArray(resourceDemand),translateToArray(resourceGiven))\n            if(receiveMode === 'Accept'){\n                sendMessage('Trade Acceptance',{code,resources:[resourceGiven,resourceDemand]})\n                const changeToPartner = -translateToArray(resourceDemand).reduce((t,e)=>t+e,0) + translateToArray(resourceGiven).reduce((t,e)=>t+e,0)\n                model.resourcePlayers[myTradingPartner.indexOf(code)]+=changeToPartner\n                model.minusResource(resourceDemand)\n                model.addResource(resourceGiven)\n                await awaitResponse('Trade Acceptance')\n                getRidOfCode(code)\n            }\n            else{\n                sendMessage(\"Trade Response\",{resources:[given,demand],code})\n                await awaitResponse('Trade Response')\n            }\n        }catch(e){\n            console.log(e)\n            //Refuse Trade\n            sendMessage('Trade Refuse')\n            getRidOfCode(code)\n            await awaitResponse(\"Trade Refuse\")\n        }\n        view.changePlayerResourceCount(model)\n    }\n\n    addMessage('Trade Response',async ({code,resources})=>{\n        if(!myTradingCodes.includes(code)) return\n        let [resourceDemand,resourceGiven] = resources\n        let user = model.usernames[myTradingPartner.indexOf(code)]\n        handleTrade(user,resourceDemand,resourceGiven,code)\n    })\n    attachPassiveFunctionFactory('Trade Initiation',({players,codes,resources})=>{\n        if(!players.includes(model.playerid)) return\n        myTradingCodes.push(codes[players.indexOf(model.playerid)])\n        myTradingPartner.push(global.turn)\n        handleTrade(global.turn,resources[1],resources[0],codes[players.indexOf(model.playerid)])\n    })\n    addMessage('Trade Refuse',({code})=>{\n        if(myTradingCodes.includes(code)) getRidOfCode(code)\n    })\n    addMessage('Trade Acceptance',({code,resources,players})=>{\n        if(!myTradingCodes.includes(code)){\n            const [giver,getter] = players\n            const [resourceDemand,resourceGiven] = resources\n            const changeToPartner = -translateToArray(resourceDemand).reduce((t,e)=>t+e,0) + translateToArray(resourceGiven).reduce((t,e)=>t+e,0)\n            model.resourcePlayers[giver] -= changeToPartner\n            model.resourcePlayers[getter] += changeToPartner\n        }\n        else{\n            const otherPlayer = myTradingPartner[myTradingCodes.indexOf(code)]\n            getRidOfCode(code)\n            const [resourceDemand,resourceGiven] = resources\n            const changeToPartner = -translateToArray(resourceDemand).reduce((t,e)=>t+e,0) + translateToArray(resourceGiven).reduce((t,e)=>t+e,0)\n            model.resourcePlayers[otherPlayer]+=changeToPartner\n            model.minusResource(resourceDemand)\n            model.addResource(resourceGiven)\n            view.changePlayerResourceCount(model)\n        }\n    })\n    attachPassiveFunctionFactory('Trade with Bank',({resource})=>{\n        let [give,take] = resource\n        let change = -translateToArray(give).reduce((t,e)=>t+e,0) + translateToArray(take).reduce((t,e)=>t+e,0)\n        model.resourcePlayers[global.turn] += change\n    })\n}\n\nexport default Controller","import React, { useRef, useEffect, useState } from 'react';\nimport \"bootstrap/dist/css/bootstrap.min.css\"\nimport {Formik} from 'formik'\nimport {object,string} from 'yup'\nimport axios from 'axios'\nimport cogoToast from 'cogo-toast'\nimport {BrowserRouter as Router,Link,Route,Switch} from 'react-router-dom'\nimport Controller from './Controller/controller'\n\nconst baseURL = (process.env.NODE_ENV === 'production')?'/':'http://localhost:4000'\nconst base = axios.create({baseURL})\nconst get = (url)=>base({method:'GET',url})\nconst post = (url,data)=>base({method:'POST',url,data})\n\nfunction App() {\n  let canvasRef = useRef()\n  const [logIn,setLogIn] = useState(false)\n  const token = useRef()\n\n  const validationSchema = object().shape({\n    username:string(),\n    roomCode:string()\n  })\n  const processLogin = (t)=>{\n    token.current = t\n    setLogIn(true)\n  }\n\n  const submitData = async ({username,roomCode})=>{\n    const {error,message,token} = (await post('/register',{username,roomCode})).data\n    if(error) return cogoToast.error(message||\"An error occur\")\n    else processLogin(token)\n  }\n\n  const createRoom = async ({username})=>{\n    const {error,message,token} = (await post('/create',{username})).data\n    if(error) return cogoToast.error(message || 'An error occur')\n    else processLogin(token)\n  }\n\n  useEffect(()=>{\n    if(token.current){\n      Controller(canvasRef.current,token.current)\n    }\n  },[logIn])\n\n  if(!logIn){\n    return (\n      <Router>\n        <Switch>\n          <Route path='/create'>\n            <div className='container-fluid text-center'>\n              <h1>Catan Online</h1>\n              <p>Please enter your username</p>\n              <Formik initialValues={{username:''}} onSubmit={createRoom}>\n                {({handleChange,handleBlur,handleSubmit})=>(\n                  <form className='form-group w-75 mx-auto' onSubmit={handleSubmit}>\n                    <label className='font-weight-bold'>Username</label>\n                    <input type='text' name='username' className='form-control' onChange={handleChange} onBlur={handleBlur}/>\n                    <button className='mt-2 btn btn-success' type='submit'>Create a Room</button>\n                  </form>\n                )\n                }\n              </Formik>\n              <Link to='/'>Join a room</Link>\n            </div>\n          </Route>\n          <Route path='/' exact>\n            <div className='container-fluid text-center'>\n              <h1>Catan Online</h1>\n              <p>Please enter your room code and username</p>\n              <Formik initialValues={{roomCode:'',username:''}} onSubmit={submitData} validationSchema={validationSchema}>\n                {({handleChange,handleBlur,handleSubmit})=>(\n                  <form className='form-group w-75 mx-auto' onSubmit={handleSubmit}>\n                    <label className='font-weight-bold'>Username</label>\n                    <input type='username' name='username' className='form-control' onChange={handleChange} onBlur={handleBlur}/>\n                    <label className='font-weight-bold'>Room Code</label>\n                    <input type='text' name='roomCode' className='form-control' onChange={handleChange} onBlur={handleBlur}/>\n                    <button className='mt-2 btn btn-success' type='submit'>Submit</button>\n                  </form>\n                )\n                }\n              </Formik>\n              <Link to='/create'>Create a room</Link>\n            </div>\n          </Route>\n        </Switch>\n      </Router>\n    )\n  }\n  else{\n    return (\n      <>\n        <div className=\"d-flex align-items-center w-100 h-100 position-absolute\">\n          <canvas ref={canvasRef} style={{width:'850px',height:'650px'}} className='align-self-center mx-auto'></canvas>\n        </div>\n      </>\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}